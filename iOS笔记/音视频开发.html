<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>音视频开发 | 文档</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/assets/css/0.styles.e4d8b86b.css" as="style"><link rel="preload" href="/assets/js/app.9de76d75.js" as="script"><link rel="preload" href="/assets/js/2.98ea7a63.js" as="script"><link rel="preload" href="/assets/js/74.68f4db5d.js" as="script"><link rel="prefetch" href="/assets/js/10.fa8eed47.js"><link rel="prefetch" href="/assets/js/11.f98f25e0.js"><link rel="prefetch" href="/assets/js/12.1ab9b5a3.js"><link rel="prefetch" href="/assets/js/13.75251b00.js"><link rel="prefetch" href="/assets/js/14.b5068189.js"><link rel="prefetch" href="/assets/js/15.33abd7e1.js"><link rel="prefetch" href="/assets/js/16.34ed8053.js"><link rel="prefetch" href="/assets/js/17.b3d52ea3.js"><link rel="prefetch" href="/assets/js/18.cbe71205.js"><link rel="prefetch" href="/assets/js/19.c632cb86.js"><link rel="prefetch" href="/assets/js/20.90d9a221.js"><link rel="prefetch" href="/assets/js/21.15cb7700.js"><link rel="prefetch" href="/assets/js/22.62ea968a.js"><link rel="prefetch" href="/assets/js/23.b743fdd5.js"><link rel="prefetch" href="/assets/js/24.5d157647.js"><link rel="prefetch" href="/assets/js/25.1935fba3.js"><link rel="prefetch" href="/assets/js/26.fd22f8ee.js"><link rel="prefetch" href="/assets/js/27.f47adfe7.js"><link rel="prefetch" href="/assets/js/28.d9f5719d.js"><link rel="prefetch" href="/assets/js/29.82cbf665.js"><link rel="prefetch" href="/assets/js/3.b96f613e.js"><link rel="prefetch" href="/assets/js/30.9f901f01.js"><link rel="prefetch" href="/assets/js/31.d9e2f61c.js"><link rel="prefetch" href="/assets/js/32.b14052e9.js"><link rel="prefetch" href="/assets/js/33.1b2e5efd.js"><link rel="prefetch" href="/assets/js/34.4bf7f44f.js"><link rel="prefetch" href="/assets/js/35.98d5fd2b.js"><link rel="prefetch" href="/assets/js/36.cdaf1c2f.js"><link rel="prefetch" href="/assets/js/37.a67bdb9a.js"><link rel="prefetch" href="/assets/js/38.5d856b83.js"><link rel="prefetch" href="/assets/js/39.27169c95.js"><link rel="prefetch" href="/assets/js/4.268c621c.js"><link rel="prefetch" href="/assets/js/40.8763c647.js"><link rel="prefetch" href="/assets/js/41.cd839f43.js"><link rel="prefetch" href="/assets/js/42.a97bf97a.js"><link rel="prefetch" href="/assets/js/43.fd126bb1.js"><link rel="prefetch" href="/assets/js/44.50e2b10d.js"><link rel="prefetch" href="/assets/js/45.0c29263b.js"><link rel="prefetch" href="/assets/js/46.fdee27aa.js"><link rel="prefetch" href="/assets/js/47.c7c7e966.js"><link rel="prefetch" href="/assets/js/48.80bc6f0a.js"><link rel="prefetch" href="/assets/js/49.d457b0ac.js"><link rel="prefetch" href="/assets/js/5.f577ebb9.js"><link rel="prefetch" href="/assets/js/50.cea3b0e6.js"><link rel="prefetch" href="/assets/js/51.eaab3e31.js"><link rel="prefetch" href="/assets/js/52.010a2dfb.js"><link rel="prefetch" href="/assets/js/53.3622f7b6.js"><link rel="prefetch" href="/assets/js/54.817aba2b.js"><link rel="prefetch" href="/assets/js/55.c3984ff9.js"><link rel="prefetch" href="/assets/js/56.6f20785e.js"><link rel="prefetch" href="/assets/js/57.07c7f6fc.js"><link rel="prefetch" href="/assets/js/58.4ec50d24.js"><link rel="prefetch" href="/assets/js/59.626b42b0.js"><link rel="prefetch" href="/assets/js/6.b9249342.js"><link rel="prefetch" href="/assets/js/60.ba2af5c7.js"><link rel="prefetch" href="/assets/js/61.6e22c298.js"><link rel="prefetch" href="/assets/js/62.df85ea27.js"><link rel="prefetch" href="/assets/js/63.cd3c1f6a.js"><link rel="prefetch" href="/assets/js/64.d0f75a86.js"><link rel="prefetch" href="/assets/js/65.12e0c392.js"><link rel="prefetch" href="/assets/js/66.aac422ac.js"><link rel="prefetch" href="/assets/js/67.3ff890c6.js"><link rel="prefetch" href="/assets/js/68.c6d12518.js"><link rel="prefetch" href="/assets/js/69.455e0c09.js"><link rel="prefetch" href="/assets/js/7.375eddd0.js"><link rel="prefetch" href="/assets/js/70.73d975e7.js"><link rel="prefetch" href="/assets/js/71.66528e07.js"><link rel="prefetch" href="/assets/js/72.a608a326.js"><link rel="prefetch" href="/assets/js/73.b8ed0811.js"><link rel="prefetch" href="/assets/js/75.85059bdc.js"><link rel="prefetch" href="/assets/js/8.a04b9d9b.js"><link rel="prefetch" href="/assets/js/9.04a00c43.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4d8b86b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>iOS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>iOS笔记</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/iOS笔记/工具.html" class="sidebar-link">工具</a></li><li><a href="/iOS笔记/计算机网络.html" class="sidebar-link">计算机网络</a></li><li><a href="/iOS笔记/架构.html" class="sidebar-link">架构</a></li><li><a href="/iOS笔记/视频播放器设计（基于FFmpeg）.html" class="sidebar-link">视频播放器设计（基于FFmpeg）</a></li><li><a href="/iOS笔记/视频常识.html" class="sidebar-link">视频常识</a></li><li><a href="/iOS笔记/数据结构与算法分析.html" class="sidebar-link">数据结构与算法分析</a></li><li><a href="/iOS笔记/算法.html" class="sidebar-link">算法</a></li><li><a href="/iOS笔记/音频常识.html" class="sidebar-link">音频常识</a></li><li><a href="/iOS笔记/音视频开发.html" class="active sidebar-link">音视频开发</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/iOS笔记/音视频开发.html#加载纹理" class="sidebar-link">加载纹理</a></li><li class="sidebar-sub-header"><a href="/iOS笔记/音视频开发.html#帧缓冲区" class="sidebar-link">帧缓冲区</a></li><li class="sidebar-sub-header"><a href="/iOS笔记/音视频开发.html#渲染管线阶段" class="sidebar-link">渲染管线阶段</a></li><li class="sidebar-sub-header"><a href="/iOS笔记/音视频开发.html#glfinish和glflush" class="sidebar-link">glFinish和glFlush</a></li><li class="sidebar-sub-header"><a href="/iOS笔记/音视频开发.html#glsl" class="sidebar-link">GLSL</a></li><li class="sidebar-sub-header"><a href="/iOS笔记/音视频开发.html#添加shader" class="sidebar-link">添加Shader</a></li><li class="sidebar-sub-header"><a href="/iOS笔记/音视频开发.html#eagl" class="sidebar-link">EAGL</a></li><li class="sidebar-sub-header"><a href="/iOS笔记/音视频开发.html#建立opengl到layer的连接" class="sidebar-link">建立OpenGL到Layer的连接</a></li><li class="sidebar-sub-header"><a href="/iOS笔记/音视频开发.html#设置坐标" class="sidebar-link">设置坐标</a></li><li class="sidebar-sub-header"><a href="/iOS笔记/音视频开发.html#交错模式和平面模式" class="sidebar-link">交错模式和平面模式</a></li></ul></li><li><a href="/iOS笔记/直播.html" class="sidebar-link">直播</a></li><li><a href="/iOS笔记/App启动优化.html" class="sidebar-link">App启动优化</a></li><li><a href="/iOS笔记/Audio.html" class="sidebar-link">Audio</a></li><li><a href="/iOS笔记/AudioToolbox.html" class="sidebar-link">AudioToolbox</a></li><li><a href="/iOS笔记/AVFoundation.html" class="sidebar-link">AVFoundation</a></li><li><a href="/iOS笔记/C.html#.html" class="sidebar-link">C</a></li><li><a href="/iOS笔记/C.html#.html" class="sidebar-link">C#</a></li><li><a href="/iOS笔记/C++.html" class="sidebar-link">C++</a></li><li><a href="/iOS笔记/CoreAudio.html" class="sidebar-link">CoreAudio</a></li><li><a href="/iOS笔记/CoreVideo.html" class="sidebar-link">CoreVideo</a></li><li><a href="/iOS笔记/FFmpeg.html" class="sidebar-link">FFmpeg</a></li><li><a href="/iOS笔记/Flutter.html" class="sidebar-link">Flutter</a></li><li><a href="/iOS笔记/GPUImage.html" class="sidebar-link">GPUImage</a></li><li><a href="/iOS笔记/ijkPlayer.html" class="sidebar-link">ijkPlayer</a></li><li><a href="/iOS笔记/iOS细节.html" class="sidebar-link">iOS细节</a></li><li><a href="/iOS笔记/iOS性能优化.html" class="sidebar-link">iOS性能优化</a></li><li><a href="/iOS笔记/LFLiveKit.html" class="sidebar-link">LFLiveKit</a></li><li><a href="/iOS笔记/Metal.html" class="sidebar-link">Metal</a></li><li><a href="/iOS笔记/Objective-C.html" class="sidebar-link">Objective-C</a></li><li><a href="/iOS笔记/OpenGL相关概念.html" class="sidebar-link">OpenGL相关概念</a></li><li><a href="/iOS笔记/pthread.html" class="sidebar-link">pthread</a></li><li><a href="/iOS笔记/ReactNative.html" class="sidebar-link">React Native</a></li><li><a href="/iOS笔记/RunLoop.html" class="sidebar-link">RunLoop</a></li><li><a href="/iOS笔记/UI视图.html" class="sidebar-link">UI视图</a></li><li><a href="/iOS笔记/VideoToolbox.html" class="sidebar-link">VideoToolbox</a></li><li><a href="/iOS笔记/WebAssembly.html" class="sidebar-link">WebAssembly</a></li><li><a href="/iOS笔记/WebRTC.html" class="sidebar-link">WebRTC</a></li><li><a href="/iOS笔记/第三方.html" class="sidebar-link">第三方</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="音视频开发"><a href="#音视频开发" class="header-anchor">#</a> 音视频开发</h1> <h2 id="加载纹理"><a href="#加载纹理" class="header-anchor">#</a> 加载纹理</h2> <h3 id="_1-创建纹理对象"><a href="#_1-创建纹理对象" class="header-anchor">#</a> 1.创建纹理对象</h3> <ul><li>glGenTextures</li></ul> <h3 id="_2-绑定纹理对象"><a href="#_2-绑定纹理对象" class="header-anchor">#</a> 2.绑定纹理对象</h3> <ul><li><p>glBindTexture(GL_TEXTURE_2D, textid)</p> <ul><li>对应的解绑纹理对象glBindTexture(GL_TEXTURE_2D, 0);</li></ul></li></ul> <h3 id="_3-设置纹理的填充方式"><a href="#_3-设置纹理的填充方式" class="header-anchor">#</a> 3.设置纹理的填充方式</h3> <ul><li><p>magnification(放大)</p> <ul><li>glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR)</li></ul></li> <li><p>minification(缩小)</p> <ul><li>glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR)</li></ul></li></ul> <h3 id="_4-设置纹理的环绕方式"><a href="#_4-设置纹理的环绕方式" class="header-anchor">#</a> 4.设置纹理的环绕方式</h3> <ul><li><p>S轴</p> <ul><li><p>glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE)</p> <p>GL_CLAMP_TO_EDGE超出(0,1)的范围设置为边界环绕方式</p></li></ul></li> <li><p>T轴</p> <ul><li>glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE)</li></ul></li></ul> <h3 id="_5-解码素材"><a href="#_5-解码素材" class="header-anchor">#</a> 5.解码素材</h3> <p>OpenGL大部分纹理一般都只接受RGBA类型的数据，解码后记为uint8_t数组类型的pixels</p> <h3 id="_6-加载素材"><a href="#_6-加载素材" class="header-anchor">#</a> 6.加载素材</h3> <ul><li>glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, pixels)</li></ul> <h3 id="_7-传递给着色器"><a href="#_7-传递给着色器" class="header-anchor">#</a> 7.传递给着色器</h3> <ul><li>glActiveTexture(GL_TEXTURE0)</li> <li>glBindTexture(GL_TEXTURE_2D, texId)</li> <li>glUniform1i(mGLUniformTexture, 0)</li></ul> <h3 id="_8-执行绘制操作"><a href="#_8-执行绘制操作" class="header-anchor">#</a> 8.执行绘制操作</h3> <ul><li>glDrawArray(GL_TRIANGLE_STRIP, 0, 4);</li></ul> <h3 id="_9-删除纹理"><a href="#_9-删除纹理" class="header-anchor">#</a> 9.删除纹理</h3> <ul><li>glDeleteTextures(1, &amp;texId)</li></ul> <h2 id="帧缓冲区"><a href="#帧缓冲区" class="header-anchor">#</a> 帧缓冲区</h2> <p>保存了图形硬件为了控制屏幕上所有像素的颜色和强度所需要的全部信息</p> <h2 id="渲染管线阶段"><a href="#渲染管线阶段" class="header-anchor">#</a> 渲染管线阶段</h2> <h3 id="_1-指定几何对象"><a href="#_1-指定几何对象" class="header-anchor">#</a> 1.指定几何对象</h3> <ul><li><p>glDrawArrays</p> <ul><li><p>GL_POINTS</p> <p>以点的形式进行绘制，通常用在绘制粒子效果的场景中</p></li> <li><p>GL_LINES</p> <p>以线的形式进行绘制，通常用在绘制直线的场景中</p></li> <li><p>GL_TRIANGLE_STRIP</p> <p>以三角形的形式进行绘制，所有二维图像的渲染都会使用这种方式</p></li></ul></li></ul> <h3 id="_2-顶点处理"><a href="#_2-顶点处理" class="header-anchor">#</a> 2.顶点处理</h3> <ul><li>输出gl_Position</li> <li>如果以点(GL_POINTS)来绘制几何图元，还应该输出gl_PointSize</li></ul> <h3 id="_3-图元组装"><a href="#_3-图元组装" class="header-anchor">#</a> 3.图元组装</h3> <ul><li>根据顶点坐标将纹理组装成图元</li></ul> <h3 id="_4-格栅化操作"><a href="#_4-格栅化操作" class="header-anchor">#</a> 4.格栅化操作</h3> <ul><li>插值计算每个片元对应的颜色、纹理坐标等属性</li></ul> <h3 id="_5-片元处理"><a href="#_5-片元处理" class="header-anchor">#</a> 5.片元处理</h3> <ul><li>输出gl_FragColor</li></ul> <h3 id="_6-帧缓冲操作"><a href="#_6-帧缓冲操作" class="header-anchor">#</a> 6.帧缓冲操作</h3> <ul><li>将最终的像素值写入到帧缓冲区</li></ul> <h2 id="glfinish和glflush"><a href="#glfinish和glflush" class="header-anchor">#</a> glFinish和glFlush</h2> <p>绘图指令并不会马上发送给图形硬件执行，而是放到一个缓冲区里面，等待缓冲区满了之后再将这些指令发送给图形硬件执行。</p> <h3 id="glflush"><a href="#glflush" class="header-anchor">#</a> glFlush</h3> <ul><li>将缓冲区中的指令立刻发送到图形硬件执行，发送完立即返回</li></ul> <h3 id="glfinish"><a href="#glfinish" class="header-anchor">#</a> glFinish</h3> <ul><li>将缓冲区的指令立即发送给图形硬件执行，但是要等待图形硬件执行完成之后才返回这些指令</li></ul> <h2 id="glsl"><a href="#glsl" class="header-anchor">#</a> GLSL</h2> <h3 id="类型"><a href="#类型" class="header-anchor">#</a> 类型</h3> <ul><li><p>const</p> <p>用于声明非可写的编译时常量变量</p></li> <li><p>attribute</p> <p>用于经常更改的信息，只能在顶点着色器中使用</p></li> <li><p>uniform</p> <p>用于不经常更改的信息，可用于顶点着色器和片元着色器</p></li> <li><p>varying</p> <p>用于修饰从顶点着色器向片元着色器传递的变量</p></li> <li><p>highp</p> <p>32bit，一般用于顶点坐标</p></li> <li><p>medium</p> <p>16bit，一般用于纹理坐标</p></li> <li><p>lowp</p> <p>一般用于颜色表示</p></li> <li><p>vec4</p></li> <li><p>mat4</p></li></ul> <h3 id="常用函数"><a href="#常用函数" class="header-anchor">#</a> 常用函数</h3> <ul><li>glUniformMatrix4fv</li> <li>glUniform1i</li></ul> <h3 id="内置变量"><a href="#内置变量" class="header-anchor">#</a> 内置变量</h3> <ul><li>vec4 gl_position</li> <li>float gl_pointSize;</li> <li>vec4 gl_FragColor;</li></ul> <h3 id="内置函数"><a href="#内置函数" class="header-anchor">#</a> 内置函数</h3> <ul><li><p>abs</p> <p>绝对值函数</p></li> <li><p>floor</p> <p>向下取整</p></li> <li><p>ceil</p> <p>向上取整</p></li> <li><p>mod</p> <p>取模函数</p></li> <li><p>clamp</p> <p>取中间值函数</p></li> <li><p>min</p></li> <li><p>max</p></li> <li><p>step(edge, x)</p> <p>如果x&lt;edge，则返回0，否则返回1.0</p></li> <li><p>smoothstep(edge0, edge1, x)</p> <p>如果x&lt;=edge0，则返回0，如果x&gt;=edge1，则返回1.0，如果edge0&lt;x&lt;edge1，则执行0~1之间的平滑差值。</p></li> <li><p>mix(x, y, a)</p> <p>返回线性混合的x和y，用公式表示为：x*(1-a)+y*a</p></li></ul> <h2 id="添加shader"><a href="#添加shader" class="header-anchor">#</a> 添加Shader</h2> <h3 id="_1-glcreateprogram"><a href="#_1-glcreateprogram" class="header-anchor">#</a> 1.glCreateProgram</h3> <h3 id="_2-glattachshader"><a href="#_2-glattachshader" class="header-anchor">#</a> 2.glAttachShader</h3> <ul><li><p>glCreateShader</p> <p>参数为GL_VERTEX_SHADER</p> <ul><li><p>glShaderSource</p> <ul><li><p>glCompileShader</p> <ul><li><p>glGetShaderiv(shader, GL_COMPILE_STATUS, result)</p> <p>判断编译是否成功，result为1表示成功，为0时进行下一步纠错</p> <ul><li><p>glGetShaderiv(shader, GL_INFO_LOG_LENGTH, result)</p> <p>返回值为错误原因字符串的长度，利用这个长度分配出一个buffer，然后进行下一步</p> <ul><li><p>glGetShaderInfoLog</p> <p>利用infoLog函数将错误打印出来</p></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul> <h3 id="_3-glattachshader"><a href="#_3-glattachshader" class="header-anchor">#</a> 3.glAttachShader</h3> <ul><li><p>glCreateShader</p> <p>参数为GL_FRAGMENT_SHADER</p> <ul><li><p>glShaderSource</p> <ul><li>glCompileShader</li></ul></li></ul></li></ul> <h3 id="_4-gllinkprogram"><a href="#_4-gllinkprogram" class="header-anchor">#</a> 4.glLinkProgram</h3> <ul><li><p>glGetProgramiv(program, GL_LINK_STATUS, result)</p> <p>检查是否链接成功，1表示链接成功，0表示链接失败，进行纠错</p> <ul><li><p>glGetProgramiv(program, GL_INFO_LOG_LENGTH, result)</p> <ul><li>glGetProgramInfoLog</li></ul></li></ul></li></ul> <h3 id="_5-gluseprogram"><a href="#_5-gluseprogram" class="header-anchor">#</a> 5.glUseProgram</h3> <h2 id="eagl"><a href="#eagl" class="header-anchor">#</a> EAGL</h2> <p>OpenGL不负责窗口管理及上下文环境管理，EAGL是在OpenGL的输出与设备的屏幕之间架接的桥梁</p> <h3 id="ios平台不允许开发者使用opengl-es直接渲染屏幕-必须使用framebuffer与renderbuffer来进行渲染。若要使用eagl-则必须先创建一个renderbuffer-然后让opengl-es渲染到该renderbuffer上去-而该renderbuffer则需要绑定到一个caeagllayer上面去-这样开发者最后调用eaglcontext和presentrenderbuffer方法-就可以将渲染结果输出到屏幕上去了。"><a href="#ios平台不允许开发者使用opengl-es直接渲染屏幕-必须使用framebuffer与renderbuffer来进行渲染。若要使用eagl-则必须先创建一个renderbuffer-然后让opengl-es渲染到该renderbuffer上去-而该renderbuffer则需要绑定到一个caeagllayer上面去-这样开发者最后调用eaglcontext和presentrenderbuffer方法-就可以将渲染结果输出到屏幕上去了。" class="header-anchor">#</a> iOS平台不允许开发者使用OpenGL ES直接渲染屏幕，必须使用FrameBuffer与RenderBuffer来进行渲染。若要使用EAGL，则必须先创建一个RenderBuffer，然后让OpenGL ES渲染到该RenderBuffer上去，而该RenderBuffer则需要绑定到一个CAEAGLLayer上面去，这样开发者最后调用EAGLContext和presentRenderBuffer方法，就可以将渲染结果输出到屏幕上去了。</h3> <h2 id="建立opengl到layer的连接"><a href="#建立opengl到layer的连接" class="header-anchor">#</a> 建立OpenGL到Layer的连接</h2> <h3 id="_1-创建caeagllayer"><a href="#_1-创建caeagllayer" class="header-anchor">#</a> 1.创建CAEAGLLayer</h3> <h3 id="_2-构建eaglcontext-直接alloc得到-context"><a href="#_2-构建eaglcontext-直接alloc得到-context" class="header-anchor">#</a> 2.构建EAGLContext，直接alloc得到_context</h3> <p>在子线程中创建</p> <ul><li>将_context绑定到当前线程，即setCurrentContext:_context</li></ul> <h3 id="_3-创建帧缓冲区"><a href="#_3-创建帧缓冲区" class="header-anchor">#</a> 3.创建帧缓冲区</h3> <ul><li>glGenFramebuffers</li></ul> <h3 id="_4-创建绘制缓冲区"><a href="#_4-创建绘制缓冲区" class="header-anchor">#</a> 4.创建绘制缓冲区</h3> <ul><li>glGenRenderbuffers</li></ul> <h3 id="_5-绑定帧缓冲到渲染管线"><a href="#_5-绑定帧缓冲到渲染管线" class="header-anchor">#</a> 5.绑定帧缓冲到渲染管线</h3> <ul><li>glBindFramebuffer(GL_FRAMEBUFFER, _FrameBuffer)</li></ul> <h3 id="_6-绑定绘制缓冲区到渲染管线"><a href="#_6-绑定绘制缓冲区到渲染管线" class="header-anchor">#</a> 6.绑定绘制缓冲区到渲染管线</h3> <ul><li>glBindRenderbuffer(GL_RENDERBUFFER, _renderbuffer)</li></ul> <h3 id="_7-为绘制缓冲区分配存储区"><a href="#_7-为绘制缓冲区分配存储区" class="header-anchor">#</a> 7.为绘制缓冲区分配存储区</h3> <p>此处将CAEAGLLayer的绘制存储区作为绘制缓冲区的存储区</p> <ul><li>renderbufferStorage</li></ul> <h3 id="_8-获取绘制缓冲区的像素宽度和高度"><a href="#_8-获取绘制缓冲区的像素宽度和高度" class="header-anchor">#</a> 8.获取绘制缓冲区的像素宽度和高度</h3> <ul><li>glGetRenderBufferParameteriv</li></ul> <h3 id="_9-将绘制缓冲区绑定到帧缓冲区"><a href="#_9-将绘制缓冲区绑定到帧缓冲区" class="header-anchor">#</a> 9.将绘制缓冲区绑定到帧缓冲区</h3> <ul><li>glFramebufferRenderbuffer</li></ul> <h3 id="_10-检查framebuffer的status"><a href="#_10-检查framebuffer的status" class="header-anchor">#</a> 10.检查FrameBuffer的status</h3> <ul><li>glCheckFramebufferStatus</li></ul> <h3 id="_11-在opengl绘制完一帧后进行显示"><a href="#_11-在opengl绘制完一帧后进行显示" class="header-anchor">#</a> 11.在OpenGL绘制完一帧后进行显示</h3> <ul><li>presentRenderbuffer</li></ul> <h2 id="设置坐标"><a href="#设置坐标" class="header-anchor">#</a> 设置坐标</h2> <h3 id="为着色器设置物体坐标"><a href="#为着色器设置物体坐标" class="header-anchor">#</a> 为着色器设置物体坐标</h3> <ul><li>1.GLfloat vertices[] = {}</li> <li>2.glVertexAttribPointer(mGLVertexCoords, 2, GL_FLOAT, 0, 0, vertices)</li> <li>3.glEnableVertexAttribArry(mGLVertexCoords)</li></ul> <h3 id="为着色器设置纹理坐标"><a href="#为着色器设置纹理坐标" class="header-anchor">#</a> 为着色器设置纹理坐标</h3> <ul><li>1.GLfloat texCoords1[] = {}</li> <li>2.glVertexAttribPointer(mGLTextureCoords, 2, GL_FLOAT, 0, 0, texCoords1)</li> <li>3.glEnableVertexAttribArray(mGLTextureCoords)</li></ul> <h2 id="交错模式和平面模式"><a href="#交错模式和平面模式" class="header-anchor">#</a> 交错模式和平面模式</h2> <h3 id="wav-pcm是交错格式"><a href="#wav-pcm是交错格式" class="header-anchor">#</a> wav/PCM是交错格式</h3> <p><em>XMind - Trial Version</em></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/iOS笔记/音频常识.html" class="prev">
        音频常识
      </a></span> <span class="next"><a href="/iOS笔记/直播.html">
        直播
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.9de76d75.js" defer></script><script src="/assets/js/2.98ea7a63.js" defer></script><script src="/assets/js/74.68f4db5d.js" defer></script>
  </body>
</html>
