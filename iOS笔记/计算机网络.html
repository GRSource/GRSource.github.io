<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>计算机网络 | 文档</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/assets/css/0.styles.e4d8b86b.css" as="style"><link rel="preload" href="/assets/js/app.9de76d75.js" as="script"><link rel="preload" href="/assets/js/2.98ea7a63.js" as="script"><link rel="preload" href="/assets/js/73.b8ed0811.js" as="script"><link rel="prefetch" href="/assets/js/10.fa8eed47.js"><link rel="prefetch" href="/assets/js/11.f98f25e0.js"><link rel="prefetch" href="/assets/js/12.1ab9b5a3.js"><link rel="prefetch" href="/assets/js/13.75251b00.js"><link rel="prefetch" href="/assets/js/14.b5068189.js"><link rel="prefetch" href="/assets/js/15.33abd7e1.js"><link rel="prefetch" href="/assets/js/16.34ed8053.js"><link rel="prefetch" href="/assets/js/17.b3d52ea3.js"><link rel="prefetch" href="/assets/js/18.cbe71205.js"><link rel="prefetch" href="/assets/js/19.c632cb86.js"><link rel="prefetch" href="/assets/js/20.90d9a221.js"><link rel="prefetch" href="/assets/js/21.15cb7700.js"><link rel="prefetch" href="/assets/js/22.62ea968a.js"><link rel="prefetch" href="/assets/js/23.b743fdd5.js"><link rel="prefetch" href="/assets/js/24.5d157647.js"><link rel="prefetch" href="/assets/js/25.1935fba3.js"><link rel="prefetch" href="/assets/js/26.fd22f8ee.js"><link rel="prefetch" href="/assets/js/27.f47adfe7.js"><link rel="prefetch" href="/assets/js/28.d9f5719d.js"><link rel="prefetch" href="/assets/js/29.82cbf665.js"><link rel="prefetch" href="/assets/js/3.b96f613e.js"><link rel="prefetch" href="/assets/js/30.9f901f01.js"><link rel="prefetch" href="/assets/js/31.d9e2f61c.js"><link rel="prefetch" href="/assets/js/32.b14052e9.js"><link rel="prefetch" href="/assets/js/33.1b2e5efd.js"><link rel="prefetch" href="/assets/js/34.4bf7f44f.js"><link rel="prefetch" href="/assets/js/35.98d5fd2b.js"><link rel="prefetch" href="/assets/js/36.cdaf1c2f.js"><link rel="prefetch" href="/assets/js/37.a67bdb9a.js"><link rel="prefetch" href="/assets/js/38.5d856b83.js"><link rel="prefetch" href="/assets/js/39.27169c95.js"><link rel="prefetch" href="/assets/js/4.268c621c.js"><link rel="prefetch" href="/assets/js/40.8763c647.js"><link rel="prefetch" href="/assets/js/41.cd839f43.js"><link rel="prefetch" href="/assets/js/42.a97bf97a.js"><link rel="prefetch" href="/assets/js/43.fd126bb1.js"><link rel="prefetch" href="/assets/js/44.50e2b10d.js"><link rel="prefetch" href="/assets/js/45.0c29263b.js"><link rel="prefetch" href="/assets/js/46.fdee27aa.js"><link rel="prefetch" href="/assets/js/47.c7c7e966.js"><link rel="prefetch" href="/assets/js/48.80bc6f0a.js"><link rel="prefetch" href="/assets/js/49.d457b0ac.js"><link rel="prefetch" href="/assets/js/5.f577ebb9.js"><link rel="prefetch" href="/assets/js/50.cea3b0e6.js"><link rel="prefetch" href="/assets/js/51.eaab3e31.js"><link rel="prefetch" href="/assets/js/52.010a2dfb.js"><link rel="prefetch" href="/assets/js/53.3622f7b6.js"><link rel="prefetch" href="/assets/js/54.817aba2b.js"><link rel="prefetch" href="/assets/js/55.c3984ff9.js"><link rel="prefetch" href="/assets/js/56.6f20785e.js"><link rel="prefetch" href="/assets/js/57.07c7f6fc.js"><link rel="prefetch" href="/assets/js/58.4ec50d24.js"><link rel="prefetch" href="/assets/js/59.626b42b0.js"><link rel="prefetch" href="/assets/js/6.b9249342.js"><link rel="prefetch" href="/assets/js/60.ba2af5c7.js"><link rel="prefetch" href="/assets/js/61.6e22c298.js"><link rel="prefetch" href="/assets/js/62.df85ea27.js"><link rel="prefetch" href="/assets/js/63.cd3c1f6a.js"><link rel="prefetch" href="/assets/js/64.d0f75a86.js"><link rel="prefetch" href="/assets/js/65.12e0c392.js"><link rel="prefetch" href="/assets/js/66.aac422ac.js"><link rel="prefetch" href="/assets/js/67.3ff890c6.js"><link rel="prefetch" href="/assets/js/68.c6d12518.js"><link rel="prefetch" href="/assets/js/69.455e0c09.js"><link rel="prefetch" href="/assets/js/7.375eddd0.js"><link rel="prefetch" href="/assets/js/70.73d975e7.js"><link rel="prefetch" href="/assets/js/71.66528e07.js"><link rel="prefetch" href="/assets/js/72.a608a326.js"><link rel="prefetch" href="/assets/js/74.68f4db5d.js"><link rel="prefetch" href="/assets/js/75.85059bdc.js"><link rel="prefetch" href="/assets/js/8.a04b9d9b.js"><link rel="prefetch" href="/assets/js/9.04a00c43.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4d8b86b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>iOS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>iOS笔记</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/iOS笔记/工具.html" class="sidebar-link">工具</a></li><li><a href="/iOS笔记/计算机网络.html" class="active sidebar-link">计算机网络</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/iOS笔记/计算机网络.html#传输层" class="sidebar-link">传输层</a></li><li class="sidebar-sub-header"><a href="/iOS笔记/计算机网络.html#osi体系" class="sidebar-link">OSI体系</a></li><li class="sidebar-sub-header"><a href="/iOS笔记/计算机网络.html#tcp-ip体系" class="sidebar-link">TCP/IP体系</a></li></ul></li><li><a href="/iOS笔记/架构.html" class="sidebar-link">架构</a></li><li><a href="/iOS笔记/视频播放器设计（基于FFmpeg）.html" class="sidebar-link">视频播放器设计（基于FFmpeg）</a></li><li><a href="/iOS笔记/视频常识.html" class="sidebar-link">视频常识</a></li><li><a href="/iOS笔记/数据结构与算法分析.html" class="sidebar-link">数据结构与算法分析</a></li><li><a href="/iOS笔记/算法.html" class="sidebar-link">算法</a></li><li><a href="/iOS笔记/音频常识.html" class="sidebar-link">音频常识</a></li><li><a href="/iOS笔记/音视频开发.html" class="sidebar-link">音视频开发</a></li><li><a href="/iOS笔记/直播.html" class="sidebar-link">直播</a></li><li><a href="/iOS笔记/App启动优化.html" class="sidebar-link">App启动优化</a></li><li><a href="/iOS笔记/Audio.html" class="sidebar-link">Audio</a></li><li><a href="/iOS笔记/AudioToolbox.html" class="sidebar-link">AudioToolbox</a></li><li><a href="/iOS笔记/AVFoundation.html" class="sidebar-link">AVFoundation</a></li><li><a href="/iOS笔记/C.html#.html" class="sidebar-link">C</a></li><li><a href="/iOS笔记/C.html#.html" class="sidebar-link">C#</a></li><li><a href="/iOS笔记/C++.html" class="sidebar-link">C++</a></li><li><a href="/iOS笔记/CoreAudio.html" class="sidebar-link">CoreAudio</a></li><li><a href="/iOS笔记/CoreVideo.html" class="sidebar-link">CoreVideo</a></li><li><a href="/iOS笔记/FFmpeg.html" class="sidebar-link">FFmpeg</a></li><li><a href="/iOS笔记/Flutter.html" class="sidebar-link">Flutter</a></li><li><a href="/iOS笔记/GPUImage.html" class="sidebar-link">GPUImage</a></li><li><a href="/iOS笔记/ijkPlayer.html" class="sidebar-link">ijkPlayer</a></li><li><a href="/iOS笔记/iOS细节.html" class="sidebar-link">iOS细节</a></li><li><a href="/iOS笔记/iOS性能优化.html" class="sidebar-link">iOS性能优化</a></li><li><a href="/iOS笔记/LFLiveKit.html" class="sidebar-link">LFLiveKit</a></li><li><a href="/iOS笔记/Metal.html" class="sidebar-link">Metal</a></li><li><a href="/iOS笔记/Objective-C.html" class="sidebar-link">Objective-C</a></li><li><a href="/iOS笔记/OpenGL相关概念.html" class="sidebar-link">OpenGL相关概念</a></li><li><a href="/iOS笔记/pthread.html" class="sidebar-link">pthread</a></li><li><a href="/iOS笔记/ReactNative.html" class="sidebar-link">React Native</a></li><li><a href="/iOS笔记/RunLoop.html" class="sidebar-link">RunLoop</a></li><li><a href="/iOS笔记/UI视图.html" class="sidebar-link">UI视图</a></li><li><a href="/iOS笔记/VideoToolbox.html" class="sidebar-link">VideoToolbox</a></li><li><a href="/iOS笔记/WebAssembly.html" class="sidebar-link">WebAssembly</a></li><li><a href="/iOS笔记/WebRTC.html" class="sidebar-link">WebRTC</a></li><li><a href="/iOS笔记/第三方.html" class="sidebar-link">第三方</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="计算机网络"><a href="#计算机网络" class="header-anchor">#</a> 计算机网络</h1> <h2 id="传输层"><a href="#传输层" class="header-anchor">#</a> 传输层</h2> <h3 id="udp"><a href="#udp" class="header-anchor">#</a> UDP</h3> <ul><li><p>基于UDP的应用层协议</p> <ul><li>DNS</li> <li>IP电话</li> <li>流式多媒体通信</li></ul></li> <li><p>应用层交给我多长的数据包，我就原封不动的交给IP层</p></li> <li><p>支持一对多</p></li> <li><p>无拥塞控制，所以在网络拥塞时可能会有报文丢失，但是可以降低延时</p> <ul><li>可使用前向纠错或者重传提高可靠性</li></ul></li> <li><p>UDP首部8字节</p> <ul><li><p>源端口</p> <ul><li>用于回信，不需要回信时填0，占用2字节</li></ul></li> <li><p>目的端口</p> <ul><li>2字节</li></ul></li> <li><p>长度</p> <ul><li>报文长度(包含首部)，2字节</li></ul></li> <li><p>检验和</p> <ul><li>检验传输是否出错，2字节</li></ul></li></ul></li></ul> <h3 id="tcp"><a href="#tcp" class="header-anchor">#</a> TCP</h3> <ul><li><p>基于TCP的应用层协议</p> <ul><li>HTTP</li> <li>FTP</li></ul></li> <li><p>TCP首部最小20字节，可增加4n</p> <ul><li><p>源端口</p> <ul><li>2字节</li></ul></li> <li><p>目的端口</p> <ul><li>2字节</li></ul></li> <li><p>序号</p> <ul><li>本报文段所发送的数据第一个字节的序号</li> <li>4字节</li></ul></li> <li><p>确认号</p> <ul><li>即下次我希望接收到以确认号为序号开始的数据</li> <li>4字节</li></ul></li> <li><p>数据偏移</p> <ul><li><p>数据到数据报开头的距离，即头部长度+不确定的选项字段 = 4n</p></li> <li><p>4位</p> <ul><li>假如4位偏移值为6，那么数据偏移为6x4=24字节，所以可以看出数据偏移最大为15x4=60字节，即头部最长为60字节</li></ul></li></ul></li> <li><p>保留</p> <ul><li>6位</li></ul></li> <li><p>紧急URG</p> <ul><li><p>1位</p> <ul><li>表示数据紧急处理</li></ul></li></ul></li> <li><p>确认ACK</p> <ul><li><p>1位</p> <ul><li>表示头部的确认号是否有效</li></ul></li></ul></li> <li><p>推送PSH</p> <ul><li><p>1位</p> <ul><li>表示立即处理，无需考虑接收缓存</li></ul></li></ul></li> <li><p>复位RST</p> <ul><li><p>1位</p> <ul><li>表示必须释放连接，重新建立连接</li></ul></li></ul></li> <li><p>同步SYN</p> <ul><li><p>1位</p> <ul><li>SYN=1且ACK=0时，表示这是一个连接请求报文段，若对方同意，则应该响应SYN=1且ACK=1</li></ul></li></ul></li> <li><p>终止FIN</p> <ul><li><p>1位</p> <ul><li>当FIN=1，表示发送方已经发送完毕，并要求释放连接</li></ul></li></ul></li> <li><p>窗口</p> <ul><li><p>2字节</p> <ul><li>发送方的接收窗口，表示接收方可以给我回多少字节的数据</li></ul></li></ul></li> <li><p>检验和</p> <ul><li>2字节</li></ul></li> <li><p>紧急指针</p> <ul><li><p>2字节</p> <ul><li>当URG=1时，表示紧急数据的长度</li></ul></li></ul></li> <li><p>选项</p> <ul><li><p>最长可达40字节</p> <ul><li><p>定义MSS长度选项(最大数据长度)</p> <ul><li>不填即默认536字节</li></ul></li> <li><p>窗口扩大选项</p></li> <li><p>时间戳选项</p></li> <li><p>选择确认SACK选项</p> <ul><li>最多指明4个数据块，即8个边界</li></ul></li></ul></li></ul></li></ul></li> <li><p>可靠传输</p></li> <li><p>流量控制</p> <ul><li>接收方向发送方返回接收窗口的大小，控制网络流量</li> <li>流量控制所要做的就是抑制发送端发送数据的速率，以便使接收端来得及接收</li></ul></li> <li><p>拥塞控制</p> <ul><li><p>防止过多的数据注入到网络中，这样可以使网络中的路由器或链路不至于过载。</p></li> <li><p>方法</p> <ul><li><p>慢开始</p> <ul><li>当主机开始发送数据时，由于并不清楚网络的负荷情况，所以如果立即把大量数据字节注入到网络，那么就可能引起网络发生拥塞。所以较好的方法时先探测一下，即有小到大逐渐增大发送窗口。</li> <li>当收到确认后就增加不超过一个MSS长度</li> <li>每收到一个报文段的确认就将拥塞窗口+1，所以如果初始拥塞窗口大小为1，那么第二次就是发送2个报文段(2个报文段的往返时间之和是RTT)，发送两次后收到两个确认，那么第三次就是4(此时的RTT就是4个报文段的时间之和)，以此类推，后面是8、16、32...</li> <li>每收到一个确认就将拥塞窗口加1</li></ul></li> <li><p>拥塞避免</p> <ul><li>当慢开始达到一个门限值后就进入拥塞避免，拥塞避免的思路是每经过一个RTT就将拥塞窗口+1</li> <li>当拥塞窗口增长到一定大小x后网络出现超时，那么就将慢开始的门限值设置为x/2，重新慢开始动作或者快恢复动作</li> <li>拥塞避免阶段，拥塞窗口是按照线性规律增大的，这常称为加法增大AI。而一旦出现超时或3个重复的确认，就要把门限值设置为当前拥塞窗口值得一半，并大大减小拥塞窗口的数值，这常称为乘法减小</li></ul></li> <li><p>快重传</p> <ul><li>当网络中的一个报文段丢失时，而后面的报文段却正常接收了，那么后面的报文段会重复发送丢失前的3次重复确认，以便告诉发送方重传丢失的报文段，避免进入慢开始阶段，此时也会将慢开始的门限值设置为x/2。可以提高吞吐量的20%</li></ul></li> <li><p>快恢复</p> <ul><li>当执行快重传时，直接进行拥塞避免算法(即每个RTT阶段才将拥塞窗口加1)，而不是进入慢开始算法</li></ul></li></ul></li> <li><p>拥塞窗口(即发送窗口)</p></li></ul></li> <li><p>特点</p> <ul><li><p>面向连接</p></li> <li><p>一对一</p> <ul><li><p>socket</p> <ul><li>ip:port</li></ul></li></ul></li> <li><p>可靠交付</p> <ul><li>无差错</li> <li>不丢失</li> <li>不重复</li></ul></li> <li><p>全双工通信</p> <ul><li><p>通信双方应用程序均可发送和接收数据，每一方都设有发送缓存和接收缓存</p> <ul><li><p>发送缓存</p> <ul><li>应用程序将数据放入缓存，以备tcp发送</li></ul></li> <li><p>接收缓存</p> <ul><li>tcp将接收到的数据放入缓存，以备应用程序读取</li></ul></li></ul></li></ul></li> <li><p>面向字节流</p></li></ul></li> <li><p>自动重传请求(ARQ)</p> <ul><li><p>停止等待协议</p> <ul><li><p>发送一个分组，接收到确认后再发送下一个分组</p></li> <li><p>发送方超时重传</p> <ul><li>如果接收方未接收到分组或者分组有差错，就什么也不做，那么发送方就会一直收不到确认，就会触发超时重传</li></ul></li> <li><p>确认丢失</p> <ul><li>如果接收方接收到了分组，也发送了确认，但是确认在网络传输过程中丢失了，那么发送方肯定一直收不到确认，会触发超时重传，此时接收方又收到了重复的分组，那么接收方就会将该重发的分组丢弃，并再次发送一个确认给发送方。</li></ul></li> <li><p>确认迟到</p> <ul><li>如果接收方接收到分组后，也发送了确认，但是确认却迟迟未到达发送方，此时也会触发超时重传，发送方重传之后接收方会丢弃重传的分组，并再次发送确认，如果发送方接收到迟到的确认，那么会将迟到的确认丢弃</li></ul></li> <li><p>信道利用率太低</p></li></ul></li> <li><p>连续ARQ协议</p> <ul><li><p>累计确认</p> <ul><li>对按序到达的最后一个分组发送确认</li></ul></li></ul></li> <li><p>滑动窗口协议</p></li></ul></li> <li><p>tcp的实现</p> <ul><li>A发送窗口的大小一定小于B接收窗口的大小，A在接收到B的报文段后就可以获得B的接收窗口大小，此时可以设置发送窗口大小，另外发送窗口的大小还要受到网络拥塞的限制</li> <li>将发送窗口中的字节流组装成报文段发送出去</li> <li>接收窗口对按序到达的最后一个分组发送确认发送方，发送方收到确认后，将滑动窗口向前移动，移动距离是根据确认报文中的确认号来计算的</li></ul></li> <li><p>tcp发送时机</p> <ul><li>发送缓存中的数据达到MSS</li> <li>PUSH</li> <li>重传计时器时间到达</li></ul></li> <li><p>保活计时器</p> <ul><li>当客户端和服务器建立连接后，每次客户端向服务器发送完数据，服务端都会重新设置保活计时器，保活计时器通常设置为2小时，当客户端无故宕机未断开连接时，如果计时器时间到达，那么服务端就会发送探测报文段，每隔75秒发送一次，如果发送10次后仍然无法收到响应，那么服务端就认为客户端故障，接着就会关闭这个连接。</li></ul></li></ul> <h3 id="复用-分用"><a href="#复用-分用" class="header-anchor">#</a> 复用/分用</h3> <h3 id="差错检测"><a href="#差错检测" class="header-anchor">#</a> 差错检测</h3> <h3 id="负载"><a href="#负载" class="header-anchor">#</a> 负载</h3> <ul><li>即单位时间内输入给网络的分组数目</li></ul> <h3 id="吞吐量"><a href="#吞吐量" class="header-anchor">#</a> 吞吐量</h3> <ul><li>单位时间内从网络输出的分组数目</li></ul> <h2 id="osi体系"><a href="#osi体系" class="header-anchor">#</a> OSI体系</h2> <h3 id="应用层"><a href="#应用层" class="header-anchor">#</a> 应用层</h3> <ul><li>应用进程间通信和交互的规则，定义你要什么和我要什么，即采用的规则</li> <li>报文</li> <li>dns/http/smtp</li></ul> <h3 id="表示层"><a href="#表示层" class="header-anchor">#</a> 表示层</h3> <h3 id="会话层"><a href="#会话层" class="header-anchor">#</a> 会话层</h3> <h3 id="传输层-2"><a href="#传输层-2" class="header-anchor">#</a> 传输层</h3> <ul><li><p>为应用层提供通用的传输服务，定义如何传，规则有了之后，我要怎么传呢？</p></li> <li><p>TCP</p> <ul><li><p>传输控制协议</p> <ul><li>面向连接</li> <li>可靠</li> <li>tcp报文段</li></ul></li></ul></li> <li><p>UDP</p> <ul><li><p>用户数据报协议</p> <ul><li>面向无连接</li> <li>尽最大努力交付</li> <li>udp用户数据报</li></ul></li></ul></li></ul> <h3 id="网络层"><a href="#网络层" class="header-anchor">#</a> 网络层</h3> <ul><li>ip</li> <li>ip数据报</li> <li>我要怎么才能找到对方呢？就是网络层协议</li></ul> <h3 id="数据链路层"><a href="#数据链路层" class="header-anchor">#</a> 数据链路层</h3> <ul><li>将数据报组装成帧</li></ul> <h3 id="物理层"><a href="#物理层" class="header-anchor">#</a> 物理层</h3> <ul><li>二进制</li></ul> <h2 id="tcp-ip体系"><a href="#tcp-ip体系" class="header-anchor">#</a> TCP/IP体系</h2> <h3 id="应用层-2"><a href="#应用层-2" class="header-anchor">#</a> 应用层</h3> <h3 id="传输层-3"><a href="#传输层-3" class="header-anchor">#</a> 传输层</h3> <h3 id="网络层-2"><a href="#网络层-2" class="header-anchor">#</a> 网络层</h3> <h3 id="网络接口层"><a href="#网络接口层" class="header-anchor">#</a> 网络接口层</h3> <p><em>XMind - Trial Version</em></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/iOS笔记/工具.html" class="prev">
        工具
      </a></span> <span class="next"><a href="/iOS笔记/架构.html">
        架构
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.9de76d75.js" defer></script><script src="/assets/js/2.98ea7a63.js" defer></script><script src="/assets/js/73.b8ed0811.js" defer></script>
  </body>
</html>
