<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Objective-C | 文档</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/assets/css/0.styles.e4d8b86b.css" as="style"><link rel="preload" href="/assets/js/app.9de76d75.js" as="script"><link rel="preload" href="/assets/js/2.98ea7a63.js" as="script"><link rel="preload" href="/assets/js/53.3622f7b6.js" as="script"><link rel="prefetch" href="/assets/js/10.fa8eed47.js"><link rel="prefetch" href="/assets/js/11.f98f25e0.js"><link rel="prefetch" href="/assets/js/12.1ab9b5a3.js"><link rel="prefetch" href="/assets/js/13.75251b00.js"><link rel="prefetch" href="/assets/js/14.b5068189.js"><link rel="prefetch" href="/assets/js/15.33abd7e1.js"><link rel="prefetch" href="/assets/js/16.34ed8053.js"><link rel="prefetch" href="/assets/js/17.b3d52ea3.js"><link rel="prefetch" href="/assets/js/18.cbe71205.js"><link rel="prefetch" href="/assets/js/19.c632cb86.js"><link rel="prefetch" href="/assets/js/20.90d9a221.js"><link rel="prefetch" href="/assets/js/21.15cb7700.js"><link rel="prefetch" href="/assets/js/22.62ea968a.js"><link rel="prefetch" href="/assets/js/23.b743fdd5.js"><link rel="prefetch" href="/assets/js/24.5d157647.js"><link rel="prefetch" href="/assets/js/25.1935fba3.js"><link rel="prefetch" href="/assets/js/26.fd22f8ee.js"><link rel="prefetch" href="/assets/js/27.f47adfe7.js"><link rel="prefetch" href="/assets/js/28.d9f5719d.js"><link rel="prefetch" href="/assets/js/29.82cbf665.js"><link rel="prefetch" href="/assets/js/3.b96f613e.js"><link rel="prefetch" href="/assets/js/30.9f901f01.js"><link rel="prefetch" href="/assets/js/31.d9e2f61c.js"><link rel="prefetch" href="/assets/js/32.b14052e9.js"><link rel="prefetch" href="/assets/js/33.1b2e5efd.js"><link rel="prefetch" href="/assets/js/34.4bf7f44f.js"><link rel="prefetch" href="/assets/js/35.98d5fd2b.js"><link rel="prefetch" href="/assets/js/36.cdaf1c2f.js"><link rel="prefetch" href="/assets/js/37.a67bdb9a.js"><link rel="prefetch" href="/assets/js/38.5d856b83.js"><link rel="prefetch" href="/assets/js/39.27169c95.js"><link rel="prefetch" href="/assets/js/4.268c621c.js"><link rel="prefetch" href="/assets/js/40.8763c647.js"><link rel="prefetch" href="/assets/js/41.cd839f43.js"><link rel="prefetch" href="/assets/js/42.a97bf97a.js"><link rel="prefetch" href="/assets/js/43.fd126bb1.js"><link rel="prefetch" href="/assets/js/44.50e2b10d.js"><link rel="prefetch" href="/assets/js/45.0c29263b.js"><link rel="prefetch" href="/assets/js/46.fdee27aa.js"><link rel="prefetch" href="/assets/js/47.c7c7e966.js"><link rel="prefetch" href="/assets/js/48.80bc6f0a.js"><link rel="prefetch" href="/assets/js/49.d457b0ac.js"><link rel="prefetch" href="/assets/js/5.f577ebb9.js"><link rel="prefetch" href="/assets/js/50.cea3b0e6.js"><link rel="prefetch" href="/assets/js/51.eaab3e31.js"><link rel="prefetch" href="/assets/js/52.010a2dfb.js"><link rel="prefetch" href="/assets/js/54.817aba2b.js"><link rel="prefetch" href="/assets/js/55.c3984ff9.js"><link rel="prefetch" href="/assets/js/56.6f20785e.js"><link rel="prefetch" href="/assets/js/57.07c7f6fc.js"><link rel="prefetch" href="/assets/js/58.4ec50d24.js"><link rel="prefetch" href="/assets/js/59.626b42b0.js"><link rel="prefetch" href="/assets/js/6.b9249342.js"><link rel="prefetch" href="/assets/js/60.ba2af5c7.js"><link rel="prefetch" href="/assets/js/61.6e22c298.js"><link rel="prefetch" href="/assets/js/62.df85ea27.js"><link rel="prefetch" href="/assets/js/63.cd3c1f6a.js"><link rel="prefetch" href="/assets/js/64.d0f75a86.js"><link rel="prefetch" href="/assets/js/65.12e0c392.js"><link rel="prefetch" href="/assets/js/66.aac422ac.js"><link rel="prefetch" href="/assets/js/67.3ff890c6.js"><link rel="prefetch" href="/assets/js/68.c6d12518.js"><link rel="prefetch" href="/assets/js/69.455e0c09.js"><link rel="prefetch" href="/assets/js/7.375eddd0.js"><link rel="prefetch" href="/assets/js/70.73d975e7.js"><link rel="prefetch" href="/assets/js/71.66528e07.js"><link rel="prefetch" href="/assets/js/72.a608a326.js"><link rel="prefetch" href="/assets/js/73.b8ed0811.js"><link rel="prefetch" href="/assets/js/74.68f4db5d.js"><link rel="prefetch" href="/assets/js/75.85059bdc.js"><link rel="prefetch" href="/assets/js/8.a04b9d9b.js"><link rel="prefetch" href="/assets/js/9.04a00c43.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4d8b86b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>iOS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>iOS笔记</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/iOS笔记/工具.html" class="sidebar-link">工具</a></li><li><a href="/iOS笔记/计算机网络.html" class="sidebar-link">计算机网络</a></li><li><a href="/iOS笔记/架构.html" class="sidebar-link">架构</a></li><li><a href="/iOS笔记/视频播放器设计（基于FFmpeg）.html" class="sidebar-link">视频播放器设计（基于FFmpeg）</a></li><li><a href="/iOS笔记/视频常识.html" class="sidebar-link">视频常识</a></li><li><a href="/iOS笔记/数据结构与算法分析.html" class="sidebar-link">数据结构与算法分析</a></li><li><a href="/iOS笔记/算法.html" class="sidebar-link">算法</a></li><li><a href="/iOS笔记/音频常识.html" class="sidebar-link">音频常识</a></li><li><a href="/iOS笔记/音视频开发.html" class="sidebar-link">音视频开发</a></li><li><a href="/iOS笔记/直播.html" class="sidebar-link">直播</a></li><li><a href="/iOS笔记/App启动优化.html" class="sidebar-link">App启动优化</a></li><li><a href="/iOS笔记/Audio.html" class="sidebar-link">Audio</a></li><li><a href="/iOS笔记/AudioToolbox.html" class="sidebar-link">AudioToolbox</a></li><li><a href="/iOS笔记/AVFoundation.html" class="sidebar-link">AVFoundation</a></li><li><a href="/iOS笔记/C.html#.html" class="sidebar-link">C</a></li><li><a href="/iOS笔记/C.html#.html" class="sidebar-link">C#</a></li><li><a href="/iOS笔记/C++.html" class="sidebar-link">C++</a></li><li><a href="/iOS笔记/CoreAudio.html" class="sidebar-link">CoreAudio</a></li><li><a href="/iOS笔记/CoreVideo.html" class="sidebar-link">CoreVideo</a></li><li><a href="/iOS笔记/FFmpeg.html" class="sidebar-link">FFmpeg</a></li><li><a href="/iOS笔记/Flutter.html" class="sidebar-link">Flutter</a></li><li><a href="/iOS笔记/GPUImage.html" class="sidebar-link">GPUImage</a></li><li><a href="/iOS笔记/ijkPlayer.html" class="sidebar-link">ijkPlayer</a></li><li><a href="/iOS笔记/iOS细节.html" class="sidebar-link">iOS细节</a></li><li><a href="/iOS笔记/iOS性能优化.html" class="sidebar-link">iOS性能优化</a></li><li><a href="/iOS笔记/LFLiveKit.html" class="sidebar-link">LFLiveKit</a></li><li><a href="/iOS笔记/Metal.html" class="sidebar-link">Metal</a></li><li><a href="/iOS笔记/Objective-C.html" class="active sidebar-link">Objective-C</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/iOS笔记/Objective-C.html#分类" class="sidebar-link">分类</a></li><li class="sidebar-sub-header"><a href="/iOS笔记/Objective-C.html#扩展" class="sidebar-link">扩展</a></li><li class="sidebar-sub-header"><a href="/iOS笔记/Objective-C.html#消息传递" class="sidebar-link">消息传递</a></li><li class="sidebar-sub-header"><a href="/iOS笔记/Objective-C.html#消息转发" class="sidebar-link">消息转发</a></li><li class="sidebar-sub-header"><a href="/iOS笔记/Objective-C.html#定时器" class="sidebar-link">定时器</a></li><li class="sidebar-sub-header"><a href="/iOS笔记/Objective-C.html#cc-编译器生成汇编文件" class="sidebar-link">CC：编译器生成汇编文件</a></li><li class="sidebar-sub-header"><a href="/iOS笔记/Objective-C.html#sizeof" class="sidebar-link">sizeof</a></li><li class="sidebar-sub-header"><a href="/iOS笔记/Objective-C.html#malloc-size" class="sidebar-link">malloc_size</a></li><li class="sidebar-sub-header"><a href="/iOS笔记/Objective-C.html#class-getinstancesize" class="sidebar-link">class_getInstanceSize</a></li><li class="sidebar-sub-header"><a href="/iOS笔记/Objective-C.html#llvm编译流程" class="sidebar-link">LLVM编译流程</a></li></ul></li><li><a href="/iOS笔记/OpenGL相关概念.html" class="sidebar-link">OpenGL相关概念</a></li><li><a href="/iOS笔记/pthread.html" class="sidebar-link">pthread</a></li><li><a href="/iOS笔记/ReactNative.html" class="sidebar-link">React Native</a></li><li><a href="/iOS笔记/RunLoop.html" class="sidebar-link">RunLoop</a></li><li><a href="/iOS笔记/UI视图.html" class="sidebar-link">UI视图</a></li><li><a href="/iOS笔记/VideoToolbox.html" class="sidebar-link">VideoToolbox</a></li><li><a href="/iOS笔记/WebAssembly.html" class="sidebar-link">WebAssembly</a></li><li><a href="/iOS笔记/WebRTC.html" class="sidebar-link">WebRTC</a></li><li><a href="/iOS笔记/第三方.html" class="sidebar-link">第三方</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="objective-c"><a href="#objective-c" class="header-anchor">#</a> Objective-C</h1> <h2 id="分类"><a href="#分类" class="header-anchor">#</a> 分类</h2> <h3 id="声明私有方法"><a href="#声明私有方法" class="header-anchor">#</a> 声明私有方法</h3> <ul><li>将分类放在.m文件当中</li></ul> <h3 id="分解体积庞大的类文件"><a href="#分解体积庞大的类文件" class="header-anchor">#</a> 分解体积庞大的类文件</h3> <ul><li>把同一功能的方法放到一个分类当中</li></ul> <h3 id="把framework的私有方法公开化"><a href="#把framework的私有方法公开化" class="header-anchor">#</a> 把Framework的私有方法公开化</h3> <h3 id="运行时决议"><a href="#运行时决议" class="header-anchor">#</a> 运行时决议</h3> <ul><li>在runtime时期将分类的方法添加到原类当中</li></ul> <h3 id="为系统类添加分类"><a href="#为系统类添加分类" class="header-anchor">#</a> 为系统类添加分类</h3> <h3 id="分类可以添加哪些内容"><a href="#分类可以添加哪些内容" class="header-anchor">#</a> 分类可以添加哪些内容？</h3> <ul><li>实例方法</li> <li>类方法</li> <li>协议</li> <li>属性(只是添加了get和set方法，并没有添加实例变量)，可以通过关联对象添加实例</li></ul> <h2 id="扩展"><a href="#扩展" class="header-anchor">#</a> 扩展</h2> <h2 id="消息传递"><a href="#消息传递" class="header-anchor">#</a> 消息传递</h2> <h3 id="首先查找类对象的缓存-如果命中的话-通过函数指针调用它的实现-如果没有命中-就查找类对象的方法列表-查找成功就调用实现-如果不成功-就通过它的superclass逐级查找父类-一直到根类对象-如果在父类中命中-就调用相应的实现-不成功进入消息转发流程-然后结束"><a href="#首先查找类对象的缓存-如果命中的话-通过函数指针调用它的实现-如果没有命中-就查找类对象的方法列表-查找成功就调用实现-如果不成功-就通过它的superclass逐级查找父类-一直到根类对象-如果在父类中命中-就调用相应的实现-不成功进入消息转发流程-然后结束" class="header-anchor">#</a> 首先查找类对象的缓存，如果命中的话，通过函数指针调用它的实现，如果没有命中，就查找类对象的方法列表，查找成功就调用实现，如果不成功，就通过它的superClass逐级查找父类，一直到根类对象，如果在父类中命中，就调用相应的实现，不成功进入消息转发流程，然后结束</h3> <h2 id="消息转发"><a href="#消息转发" class="header-anchor">#</a> 消息转发</h2> <h3 id="resolveinstancemethod"><a href="#resolveinstancemethod" class="header-anchor">#</a> +resolveInstanceMethod:</h3> <ul><li><p>YES</p> <ul><li>消息已处理</li></ul></li> <li><p>NO</p> <ul><li><p>-forwardingTargetForSelector:</p> <ul><li><p>nil</p> <ul><li>-methodSignatureForSelector</li></ul></li> <li><p>转发目标</p></li></ul></li></ul></li></ul> <h2 id="定时器"><a href="#定时器" class="header-anchor">#</a> 定时器</h2> <h3 id="nstimer"><a href="#nstimer" class="header-anchor">#</a> NSTimer</h3> <h3 id="cadisplaylink"><a href="#cadisplaylink" class="header-anchor">#</a> CADisplayLink</h3> <ul><li>根据屏幕刷新频率定时操作</li> <li>使用场合专一，适合做UI的不停重绘，比如自定义动画引擎，或者视频播放的渲染</li></ul> <h2 id="cc-编译器生成汇编文件"><a href="#cc-编译器生成汇编文件" class="header-anchor">#</a> CC：编译器生成汇编文件</h2> <h3 id="as-将汇编文件生成二进制文件"><a href="#as-将汇编文件生成二进制文件" class="header-anchor">#</a> AS：将汇编文件生成二进制文件</h3> <ul><li><p>AR:打包器，为一个库删除或者增加模板代码模块</p> <ul><li>LD：链接器，分配地址空间，将多个目标文件链接成一个库或者可执行文件</li></ul></li></ul> <h2 id="sizeof"><a href="#sizeof" class="header-anchor">#</a> sizeof</h2> <p>编译时已经决定大小，如果目标是指针，表示指针占用内存的大小，通常64位机器为8字节，如果目标是值类型，则通常就是分配的内存大小。比如int *pointer_a;  sizeof(pointer_a)是8字节，sizeof(*pointer_a)是4字节</p> <h2 id="malloc-size"><a href="#malloc-size" class="header-anchor">#</a> malloc_size</h2> <p>系统实际分配的内存大小，为16的倍数，可根据class_getInstanceSize计算得到。例如当class_getInstanceSize为40时，为达到16的倍数，则malloc_size实际分配的大小为48.</p> <h2 id="class-getinstancesize"><a href="#class-getinstancesize" class="header-anchor">#</a> class_getInstanceSize</h2> <p>获取当前对象自己和成员变量所占内存大小，8字节对齐，即8的倍数。例如：Test类，其中有三个int型变量，那么class_getInstanceSize大小计算为8+4+4+4=20，按照8字节对齐原则，所以class_getInstanceSize为24.</p> <h2 id="llvm编译流程"><a href="#llvm编译流程" class="header-anchor">#</a> LLVM编译流程</h2> <p>clang -ccc-print-phases main.m可以查看流程</p> <h3 id="输入文件-找到源文件"><a href="#输入文件-找到源文件" class="header-anchor">#</a> 输入文件，找到源文件</h3> <ul><li><p>预处理阶段：这个过程处理包括宏的替换，头文件的导入</p> <ul><li><p>编译阶段：进行词法分析、语法分析、检测语法是否正确，最终生成IR中间代码</p> <ul><li><p>后端：这里LLVM会通过一个一个的pass去优化，每个pass做一些事情，最终生成汇编代码</p> <ul><li><p>汇编代码生成目标文件</p> <ul><li><p>链接：链接需要的动态库和静态库，生成可执行文件</p> <ul><li>绑定：通过不同的架构，生成对应的可执行文件</li></ul></li></ul></li></ul></li></ul></li></ul></li></ul> <p><em>XMind - Trial Version</em></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/iOS笔记/Metal.html" class="prev">
        Metal
      </a></span> <span class="next"><a href="/iOS笔记/OpenGL相关概念.html">
        OpenGL相关概念
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.9de76d75.js" defer></script><script src="/assets/js/2.98ea7a63.js" defer></script><script src="/assets/js/53.3622f7b6.js" defer></script>
  </body>
</html>
