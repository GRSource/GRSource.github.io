(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{556:function(t,e,a){"use strict";a.r(e);var v=a(65),i=Object(v.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"reactnative"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#reactnative"}},[t._v("#")]),t._v(" ReactNative")]),t._v(" "),a("h2",{attrs:{id:"原理及结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#原理及结构"}},[t._v("#")]),t._v(" 原理及结构")]),t._v(" "),a("ul",[a("li",[t._v("React Native原理其实跟Weex差不多，底层也会把React转换为原生API")]),t._v(" "),a("li",[t._v("React Native和Weex区别在于跨平台上面，Weex只要写一套代码，React Native需要iOS，安卓都写，说明React Native底层解析原生API是分开实现的，iOS一套，安卓一套。")])]),t._v(" "),a("p",[t._v("React Native如何把React转化成原生API？"),a("br"),t._v("\nReact Native会在一开始生成OC模块表，然后把这个模块表传入JS中，JS参照模块表，就能间接调用OC的代码。相当于买了一个机器人(OC)，对应一份说明书(模块表)，用户(JS)参照说明书去执行机器人的操作。")]),t._v(" "),a("p",[t._v("React Native是如何做到JS和OC交互的？"),a("br"),t._v("\niOS原生API有个JavaScriptCore框架，通过它就能实现JS和OC交互")]),t._v(" "),a("ol",[a("li",[t._v("首先写好JSX代码(React框架就是使用JSX语法)")]),t._v(" "),a("li",[t._v("把JSX代码解析成javaScript代码")]),t._v(" "),a("li",[t._v("OC读取JS文件")]),t._v(" "),a("li",[t._v("把javaScript代码读取出来，利用JavaScriptCore执行")]),t._v(" "),a("li",[t._v("javaScript代码返回一个数组，数组中会描述OC对象，OC对象的属性，OC对象所需要执行的方法，这样就能让这个对象设置属性，并且调用方法。")])]),t._v(" "),a("p",[t._v("React Navite启动流程")]),t._v(" "),a("ol",[a("li",[t._v("创建RCTRootView -> 设置窗口根控制器的View，把RN的View添加到窗口上显示。")]),t._v(" "),a("li",[t._v("创建RCTBridge -> 桥接对象，管理JS和OC交互，做中转作用。")]),t._v(" "),a("li",[t._v("创建RCTBatchedBridge -> 批量桥架对象，JS和OC交互具体实现都在这个类中。")]),t._v(" "),a("li",[t._v("执行[RCTBatchedBridge loadSource] -> 加载JS源码")]),t._v(" "),a("li",[t._v("执行[RCTBatchedBridge initModulesWithDispatchGroup] -> 创建OC模块表")]),t._v(" "),a("li",[t._v("执行[RCTJSCExecutor injectJSONText] -> 往JS中插入OC模块表")]),t._v(" "),a("li",[t._v("执行完JS代码，回调OC，调用OC中的组件")]),t._v(" "),a("li",[t._v("完成UI渲染")])]),t._v(" "),a("h2",{attrs:{id:"和flutter及jspatch区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#和flutter及jspatch区别"}},[t._v("#")]),t._v(" 和Flutter及JSPatch区别")])])}),[],!1,null,null,null);e.default=i.exports}}]);