(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{444:function(t,s,a){t.exports=a.p+"assets/img/objc_object.46e7d6fd.png"},445:function(t,s,a){t.exports=a.p+"assets/img/objc_class.ed56b711.png"},446:function(t,s,a){t.exports=a.p+"assets/img/cache_t.0147a411.png"},447:function(t,s,a){t.exports=a.p+"assets/img/bucket_t.ccd2f419.png"},448:function(t,s,a){t.exports=a.p+"assets/img/class_rw_t.9a04a7ca.png"},449:function(t,s,a){t.exports=a.p+"assets/img/class_rw_tå›¾è§£.ac5afe9f.png"},450:function(t,s,a){t.exports=a.p+"assets/img/method_t.5f4baf5d.png"},451:function(t,s,a){t.exports=a.p+"assets/img/property_t.dcd3feac.png"},452:function(t,s,a){t.exports=a.p+"assets/img/prototol_ref_t.f69be70b.png"},453:function(t,s,a){t.exports=a.p+"assets/img/class_ro_t.4d4fc24e.png"},454:function(t,s,a){t.exports=a.p+"assets/img/class_ro_tå›¾è§£.def78f3f.png"},455:function(t,s,a){t.exports=a.p+"assets/img/method_tå›¾è§£.b815f8c7.png"},456:function(t,s,a){t.exports=a.p+"assets/img/typeEncodings.63c7e1d4.png"},457:function(t,s,a){t.exports=a.p+"assets/img/runtimeå›¾è§£.d5083177.png"},458:function(t,s,a){t.exports=a.p+"assets/img/runtimeç»§æ‰¿å…³ç³».6612161c.png"},459:function(t,s,a){t.exports=a.p+"assets/img/objc_msgSend.7cc34ef2.png"},460:function(t,s,a){t.exports=a.p+"assets/img/æ¶ˆæ¯ä¼ é€’1.29e0a60d.png"},461:function(t,s,a){t.exports=a.p+"assets/img/æ¶ˆæ¯ä¼ é€’2.122a256e.png"},462:function(t,s,a){t.exports=a.p+"assets/img/åŠ¨æ€æ·»åŠ æ–¹æ³•.c812aee9.png"},560:function(t,s,a){"use strict";a.r(s);var e=a(65),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"runtime"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#runtime"}},[t._v("#")]),t._v(" Runtime")]),t._v(" "),e("h2",{attrs:{id:"runtimeæ•°æ®ç»“æ„"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#runtimeæ•°æ®ç»“æ„"}},[t._v("#")]),t._v(" Runtimeæ•°æ®ç»“æ„")]),t._v(" "),e("p",[e("strong",[t._v("objc_object")]),e("br"),t._v(" "),e("img",{attrs:{src:a(444),alt:"objc_object"}}),e("br"),t._v("\nisaæŒ‡é’ˆæŒ‡å‘å®ƒæ‰€å¯¹åº”çš„Classï¼Œå³ç±»å¯¹è±¡\n"),e("strong",[t._v("objc_class")]),t._v("ç»§æ‰¿è‡³objc_objectï¼Œæ˜¯ä¸€ä¸ªç±»å¯¹è±¡\n"),e("img",{attrs:{src:a(445),alt:"objc_class"}}),e("br"),t._v("\nsuperclassæŒ‡é’ˆæŒ‡å‘çˆ¶ç±»å¯¹è±¡ï¼›cache_tè¡¨ç¤ºæ–¹æ³•ç¼“å­˜ï¼›class_data_bits_tå­˜äº†å¯¹è±¡çš„ä¸€äº›ä¿¡æ¯ï¼Œæ¯”å¦‚è¯´æ–¹æ³•ã€å±æ€§ã€åè®®ç­‰ç­‰"),e("br"),t._v("\nå› ä¸ºobjc_classç»§æ‰¿è‡³objc_objectï¼Œæ‰€ä»¥objc_classä¹Ÿæœ‰ä¸€ä¸ªisaæŒ‡é’ˆï¼Œå…¶æŒ‡å‘å…ƒç±»å¯¹è±¡\nå¦‚æœæˆ‘ä»¬è°ƒç”¨ä¸€ä¸ªå®ä¾‹çš„å®ä¾‹æ–¹æ³•ï¼Œå®é™…ä¸Šå°±æ˜¯é€šè¿‡å®ä¾‹isaæŒ‡é’ˆåˆ°å®ƒæ‰€å¯¹åº”çš„ç±»å¯¹è±¡å½“ä¸­å»æŸ¥æ‰¾ï¼Œå¦‚æœæˆ‘ä»¬è°ƒç”¨çš„æ˜¯ä¸€ä¸ªç±»æ–¹æ³•ï¼Œå®é™…ä¸Šå°±æ˜¯é€šè¿‡ç±»å¯¹è±¡çš„isaæŒ‡é’ˆåˆ°å®ƒçš„å…ƒç±»å¯¹è±¡å½“ä¸­å»æŸ¥æ‰¾ã€‚"),e("br"),t._v(" "),e("img",{attrs:{src:a(446),alt:"cache_t"}}),e("br"),t._v("\ncache_tç”¨äºå¿«é€ŸæŸ¥æ‰¾æ–¹æ³•çš„æ‰§è¡Œå‡½æ•°,æ˜¯å¯å¢é‡æ‰©å±•çš„å“ˆå¸Œè¡¨ç»“æ„,æ˜¯å±€éƒ¨æ€§åŸç†çš„æœ€ä½³åº”ç”¨"),e("br"),t._v("\ncache_tç”±bucket_tçš„æ•°ç»„ç»„æˆï¼Œbucket_tç”±å¯¹åº”çš„keyå’Œimpæ¥å®ç°"),e("br"),t._v(" "),e("img",{attrs:{src:a(447),alt:"bucket_t"}}),e("br"),t._v("\nclass_data_bits_tä¸»è¦æ˜¯å¯¹class_rw_tçš„å°è£…ï¼Œclass_rw_tä»£è¡¨äº†ç±»ç›¸å…³çš„è¯»å†™ä¿¡æ¯ï¼ˆå¦‚æ–¹æ³•ã€å±æ€§ã€åè®®ï¼‰å’Œå¯¹class_ro_tçš„å°è£…"),e("br"),t._v(" "),e("img",{attrs:{src:a(448),alt:"class_rw_t"}}),t._v("\nclass_rw_tä¸»è¦ç”±å››ä¸ªéƒ¨åˆ†ç»„æˆï¼š")]),t._v(" "),e("ul",[e("li",[t._v("class_ro_t")]),t._v(" "),e("li",[t._v("protocols")]),t._v(" "),e("li",[t._v("properties")]),t._v(" "),e("li",[t._v("methods")])]),t._v(" "),e("p",[t._v("1.æˆ‘ä»¬é€šè¿‡åˆ†ç±»æ·»åŠ çš„ä¸€äº›ä¿¡æ¯éƒ½æ˜¯åœ¨protocolsã€propertieså’Œmethodså½“ä¸­ï¼Œè¿™ä¸‰ä¸ªæ•°æ®ç»“æ„æ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œä»–ä»¬éƒ½ç»§æ‰¿è‡³list_array_ttï¼Œæˆ‘ä»¬ä»¥methodsä¸ºä¾‹ï¼Œmethodsæ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªä¸€ç»´æ•°ç»„ç±»å‹ï¼Œæ¯ä¸ªä¸€ç»´æ•°ç»„åˆå­˜äº†å¾ˆå¤šmethod_tç±»å‹çš„æ•°æ®ç»“æ„ï¼Œå›¾è§£\n"),e("img",{attrs:{src:a(449),alt:"class_rw_tå›¾è§£"}}),t._v("\nmethod_tçš„å›¾è§£ï¼š"),e("br"),t._v(" "),e("img",{attrs:{src:a(450),alt:"method_t"}}),t._v("\npropertiesç”±property_tç»„æˆï¼Œproperty_tå›¾è§£ï¼š\n"),e("img",{attrs:{src:a(451),alt:"property_t"}}),t._v("\nprotocolsç”±protocol_ref_tç»„æˆï¼Œå›¾è§£ï¼š\n"),e("img",{attrs:{src:a(452),alt:"protocol_ref_t"}})]),t._v(" "),e("p",[t._v("2.class_ro_tä»£è¡¨äº†ç±»ç›¸å…³çš„åªè¯»ä¿¡æ¯ï¼Œç”±äº”ä¸ªéƒ¨åˆ†ç»„æˆï¼š")]),t._v(" "),e("ul",[e("li",[t._v("name //ç±»å")]),t._v(" "),e("li",[t._v("ivars //æˆå‘˜å˜é‡")]),t._v(" "),e("li",[t._v("baseProperties  //å±æ€§")]),t._v(" "),e("li",[t._v("baseProtocols //åè®®")]),t._v(" "),e("li",[t._v("baseMethodList //æ–¹æ³•åˆ—è¡¨"),e("br"),t._v(" "),e("img",{attrs:{src:a(453),alt:"class_ro_t"}}),t._v("\nè€Œè¿™é‡Œçš„propertiesã€protocolsã€methodListéƒ½æ˜¯ä¸€ç»´æ•°ç»„ï¼Œå­˜å‚¨çš„éƒ½æ˜¯åŸå§‹ç±»å½“ä¸­çš„ä¸€äº›ä¿¡æ¯ï¼Œæˆ‘ä»¬ä»¥methodListä¸ºä¾‹ï¼Œé‡Œé¢å­˜çš„æ˜¯method_tç±»å‹çš„æ•°æ®ç»“æ„ï¼Œè·Ÿclass_rw_tå½“ä¸­çš„method_tæ˜¯ä¸€è‡´çš„ï¼Œå›¾è§£ï¼š\n"),e("img",{attrs:{src:a(454),alt:"class_ro_tå›¾è§£"}})])]),t._v(" "),e("hr"),t._v(" "),e("p",[t._v("1.å‡½æ•°å››è¦ç´ ï¼šåç§°ã€è¿”å›å€¼ã€å‚æ•°ã€å‡½æ•°ä½“ã€‚å’Œmethod_tå¯¹åº”å…³ç³»å¦‚å›¾ï¼š\n"),e("img",{attrs:{src:a(455),alt:"method_tå›¾è§£"}}),t._v("\ntypeså¯¹åº”äºæ–¹æ³•ç­¾åçš„type Encodingsï¼Œå¦‚å›¾\n"),e("img",{attrs:{src:a(456),alt:"typeEncodings"}})]),t._v(" "),e("hr"),t._v(" "),e("p",[e("img",{attrs:{src:a(457),alt:"runtimeå›¾è§£"}})]),t._v(" "),e("h2",{attrs:{id:"ç±»å¯¹è±¡å’Œå…ƒç±»å¯¹è±¡"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ç±»å¯¹è±¡å’Œå…ƒç±»å¯¹è±¡"}},[t._v("#")]),t._v(" ç±»å¯¹è±¡å’Œå…ƒç±»å¯¹è±¡")]),t._v(" "),e("p",[t._v("é—®1ï¼šç±»å¯¹è±¡å’Œå…ƒç±»å¯¹è±¡çš„åŒºåˆ«ï¼Ÿ"),e("br"),t._v("\n1.ç±»å¯¹è±¡å­˜å‚¨å®ä¾‹æ–¹æ³•åˆ—è¡¨ç­‰ä¿¡æ¯"),e("br"),t._v("\n2.å…ƒç±»å¯¹è±¡å­˜å‚¨ç±»æ–¹æ³•åˆ—è¡¨ç­‰ä¿¡æ¯"),e("br"),t._v(" "),e("img",{attrs:{src:a(458),alt:"runtimeç»§æ‰¿å…³ç³»"}}),t._v("\né—®2ï¼šobjective-cæ¶ˆæ¯ä¼ é€’çš„è¿‡ç¨‹ï¼Ÿ"),e("br"),t._v("\nå½“æˆ‘ä»¬è°ƒç”¨æŸä¸ªå®ä¾‹çš„æ–¹æ³•æ—¶ï¼Œé¦–å…ˆç³»ç»Ÿä¼šæ ¹æ®å½“å‰å®ä¾‹çš„isaæŒ‡é’ˆæ‰¾åˆ°ä»–çš„ç±»å¯¹è±¡ï¼Œç„¶ååœ¨ä»–çš„ç±»å¯¹è±¡ä¸­å»éå†æ–¹æ³•åˆ—è¡¨ï¼Œå»æŸ¥æ‰¾åŒåçš„æ–¹æ³•å®ç°ï¼Œå¦‚æœæ²¡æœ‰æŸ¥æ‰¾åˆ°çš„è¯ï¼Œå°±ä¼šé¡ºæ¬¡å»æŸ¥æ‰¾çˆ¶ç±»çš„æ–¹æ³•åˆ—è¡¨ï¼Œç„¶åå†é¡ºæ¬¡å»æŸ¥æ‰¾æ ¹ç±»å¯¹è±¡çš„æ–¹æ³•ç±»åˆ«ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°å°±ä¼šè¿›å…¥æ¶ˆæ¯è½¬å‘æµç¨‹ï¼Œåé¢ä¼šä»‹ç»æ¶ˆæ¯è½¬å‘ã€‚\nå½“æˆ‘ä»¬è°ƒç”¨ç±»æ–¹æ³•ï¼Œå°±ä¼šé€šè¿‡ç±»å¯¹è±¡çš„isaæŒ‡é’ˆæ‰¾åˆ°å…ƒç±»å¯¹è±¡ï¼Œé¡ºæ¬¡éå†æ–¹æ³•åˆ—è¡¨ï¼Œç›´åˆ°æ ¹å…ƒç±»å¯¹è±¡ï¼Œç„¶åå†åˆ°æ ¹ç±»å¯¹è±¡ï¼Œç„¶åå†åˆ°nilï¼Œè¿›å…¥æ¶ˆæ¯è½¬å‘æµç¨‹ã€‚")]),t._v(" "),e("p",[t._v("** æ¶ˆæ¯ä¼ é€’"),e("br"),t._v(" "),e("img",{attrs:{src:a(459),alt:"objc_msgSend"}}),t._v(" "),e("img",{attrs:{src:a(460),alt:"æ¶ˆæ¯ä¼ é€’1"}}),t._v(" "),e("img",{attrs:{src:a(461),alt:"æ¶ˆæ¯ä¼ é€’2"}})]),t._v(" "),e("p",[t._v("é—®3ï¼šæ¶ˆæ¯ä¼ é€’æŸ¥æ‰¾æµç¨‹ï¼Ÿ"),e("br"),t._v("\nè°ƒç”¨æ–¹æ³•åï¼Œå…ˆæŸ¥æ‰¾ç¼“å­˜ï¼Œå¦‚æœç¼“å­˜ä¸­æœ‰å¯¹åº”é€‰æ‹©å™¨æ–¹æ³•çš„å®ç°ï¼Œå°±è°ƒç”¨å‡½æ•°æŒ‡é’ˆï¼Œå®Œæˆæ¶ˆæ¯ä¼ é€’ï¼Œå¦‚æœç¼“å­˜ä¸­æ²¡æœ‰ï¼Œå°±è°ƒç”¨å½“å‰ç±»å¯¹è±¡çš„æ–¹æ³•åˆ—è¡¨ï¼Œå¦‚æœå‘½ä¸­ï¼Œå°±é€šè¿‡å‡½æ•°æŒ‡é’ˆè¿›è¡Œè°ƒç”¨ï¼Œå®Œæˆæ¶ˆæ¯ä¼ é€’ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™é€çº§åœ¨çˆ¶ç±»å¯¹è±¡ä¸­è¿›è¡ŒæŸ¥æ‰¾ï¼Œå¦‚æœæŸä¸ªçˆ¶ç±»å‘½ä¸­ï¼Œåˆ™é€šè¿‡å‡½æ•°æŒ‡é’ˆè°ƒç”¨å‡½æ•°å®ç°ï¼Œå®Œæˆæ¶ˆæ¯ä¼ é€’ï¼Œå¦‚æœæŸ¥åˆ°æ ¹ç±»å¯¹è±¡è¿˜æ²¡æœ‰æŸ¥åˆ°ï¼Œå°±è¿›å…¥æ¶ˆæ¯è½¬å‘æµç¨‹ï¼Œç»“æŸæ¶ˆæ¯ä¼ é€’ã€‚")]),t._v(" "),e("h2",{attrs:{id:"æ–¹æ³•ç¼“å­˜æŸ¥æ‰¾"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#æ–¹æ³•ç¼“å­˜æŸ¥æ‰¾"}},[t._v("#")]),t._v(" æ–¹æ³•ç¼“å­˜æŸ¥æ‰¾")]),t._v(" "),e("p",[t._v("é—®1ï¼šç»™ä½ å€¼SELï¼Œç›®æ ‡æ˜¯å¯¹åº”ç¼“å­˜ä¸­bucket_tä¸­çš„IMP"),e("br"),t._v("\né€šè¿‡å“ˆå¸ŒæŸ¥æ‰¾åˆ°å¯¹åº”çš„bucket_tï¼Œå“ˆå¸Œç®—æ³•é‡‡ç”¨æ˜¯key & maskï¼Œå…¶ä¸­maskæ˜¯cache_tçš„ä¸€ä¸ªæˆå‘˜å˜é‡"),e("br"),t._v("\né—®2ï¼šå½“å‰ç±»ä¸­æŸ¥æ‰¾æ–¹æ³•"),e("br"),t._v("\nå¯¹äºå·²æ’åºå¥½çš„åˆ—è¡¨ï¼Œé‡‡ç”¨äºŒåˆ†æŸ¥æ‰¾ç®—æ³•æŸ¥æ‰¾æ–¹æ³•å¯¹åº”æ‰§è¡Œå‡½æ•°"),e("br"),t._v("\nå¯¹äºæ²¡æœ‰æ’åºçš„åˆ—è¡¨ï¼Œé‡‡ç”¨ä¸€èˆ¬éå†æŸ¥æ‰¾æ–¹æ³•å¯¹åº”æ‰§è¡Œå‡½æ•°"),e("br"),t._v("\né—®3ï¼šç¼“å­˜æŸ¥æ‰¾å’Œå½“å‰ç±»ä¸­æ–¹æ³•æŸ¥æ‰¾çš„åŒºåˆ«ï¼Ÿ"),e("br"),t._v("\nä¼˜å…ˆæŸ¥æ‰¾ç¼“å­˜ï¼Œé‡‡ç”¨å“ˆå¸ŒæŸ¥æ‰¾ç®—æ³•ï¼Œå¦‚æœæ²¡æœ‰å‘½ä¸­ï¼Œå°±ç»§ç»­æŸ¥æ‰¾å½“å‰ç±»å¯¹è±¡çš„æ–¹æ³•åˆ—è¡¨ï¼Œå¯¹äºå·²æ’åºçš„æ–¹æ³•åˆ—è¡¨é‡‡ç”¨äºŒåˆ†æŸ¥æ‰¾ï¼Œå¯¹äºæ²¡æœ‰æ’åºçš„æ–¹æ³•åˆ—è¡¨é‡‡ç”¨ä¸€èˆ¬éå†æŸ¥æ‰¾ï¼Œå¦‚æœè¿˜æ²¡æ‰¾åˆ°ï¼Œå°±é€çº§çˆ¶ç±»è¿›è¡ŒæŸ¥æ‰¾ã€‚")]),t._v(" "),e("h2",{attrs:{id:"æ¶ˆæ¯è½¬å‘"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#æ¶ˆæ¯è½¬å‘"}},[t._v("#")]),t._v(" æ¶ˆæ¯è½¬å‘")]),t._v(" "),e("p",[t._v("å½“å‘Objective-Cå¯¹è±¡å‘é€ä¸€ä¸ªæ¶ˆæ¯ï¼Œä½†runtimeåœ¨å½“å‰ç±»åŠçˆ¶ç±»ä¸­æ‰¾ä¸åˆ°æ­¤selectorå¯¹åº”çš„æ–¹æ³•æ—¶ï¼Œæ¶ˆæ¯è½¬å‘(message forwarding)æµç¨‹å¼€å§‹å¯åŠ¨ã€‚")]),t._v(" "),e("p",[t._v("åŠ¨æ€æ–¹æ³•è§£æ\nå‘å½“å‰ç±»å‘é€+resolveInstanceMethod:(å¯¹äºç±»æ–¹æ³•åˆ™ä¸º+resolveClassMethod:)æ¶ˆæ¯ï¼Œå¦‚æœè¿”å›YES,åˆ™ç³»ç»Ÿè®¤ä¸ºè¯·æ±‚çš„æ–¹æ³•å·²ç»åŠ å…¥åˆ°äº†ï¼Œåˆ™ä¼šé‡æ–°å‘é€æ¶ˆæ¯ã€‚\nå¿«é€Ÿè½¬å‘è·¯å¾„\nå¦‚æœå½“å‰targetå®ç°äº†-forwardingTargetForSelector:æ–¹æ³•,åˆ™è°ƒç”¨æ­¤æ–¹æ³•ã€‚å¦‚æœæ­¤æ–¹æ³•è¿”å›é™¤nilå’Œselfçš„å…¶ä»–å¯¹è±¡ï¼Œåˆ™å‘è¿”å›å¯¹è±¡é‡æ–°å‘é€æ¶ˆæ¯ã€‚\næ…¢é€Ÿè½¬å‘è·¯å¾„\né¦–å…ˆruntimeå‘é€-methodSignatureForSelector:æ¶ˆæ¯æŸ¥çœ‹Selectorå¯¹åº”çš„æ–¹æ³•ç­¾åï¼Œå³å‚æ•°ä¸è¿”å›å€¼çš„ç±»å‹ä¿¡æ¯ã€‚å¦‚æœæœ‰æ–¹æ³•ç­¾åè¿”å›ï¼Œruntimeåˆ™æ ¹æ®æ–¹æ³•ç­¾ååˆ›å»ºæè¿°è¯¥æ¶ˆæ¯çš„NSInvocationï¼Œå‘å½“å‰å¯¹è±¡å‘é€forwardInvocation:æ¶ˆæ¯ï¼Œä»¥åˆ›å»ºçš„NSInvocationå¯¹è±¡ä½œä¸ºå‚æ•°ï¼›è‹¥methodSignatureForSelector:æ— æ–¹æ³•ç­¾åè¿”å›ï¼Œåˆ™å‘å½“å‰å¯¹è±¡å‘é€doesNotRecognizeSelector:æ¶ˆæ¯,ç¨‹åºæŠ›å‡ºå¼‚å¸¸é€€å‡ºã€‚")]),t._v(" "),e("h2",{attrs:{id:"method-swizzling"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#method-swizzling"}},[t._v("#")]),t._v(" Method-Swizzling")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v("Method test = class_getInstanceMethod(self, @selector(test));\nMethod otherTest = class_getInstanceMethod(self, @selector(otherTest));\nmethod_exchangeImplementations(test, otherTest);\n")])])]),e("h2",{attrs:{id:"åŠ¨æ€æ·»åŠ æ–¹æ³•"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#åŠ¨æ€æ·»åŠ æ–¹æ³•"}},[t._v("#")]),t._v(" åŠ¨æ€æ·»åŠ æ–¹æ³•")]),t._v(" "),e("p",[e("img",{attrs:{src:a(462),alt:"åŠ¨æ€æ·»åŠ æ–¹æ³•"}})]),t._v(" "),e("h2",{attrs:{id:"åŠ¨æ€åˆ›å»ºç±»"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#åŠ¨æ€åˆ›å»ºç±»"}},[t._v("#")]),t._v(" åŠ¨æ€åˆ›å»ºç±»")]),t._v(" "),e("h3",{attrs:{id:"ä½¿ç”¨objc-allocateclasspairåˆ›å»ºä¸€ä¸ªç±»class"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ä½¿ç”¨objc-allocateclasspairåˆ›å»ºä¸€ä¸ªç±»class"}},[t._v("#")]),t._v(" ä½¿ç”¨objc_allocateClassPairåˆ›å»ºä¸€ä¸ªç±»Class")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v('const char * className = "Calculator";\nClass kclass = objc_getClass(className);\nif (!kclass) \n{\n   Class superClass = [NSObject class]; \n   kclass = objc_allocateClassPair(superClass, className, 0);\n}\n')])])]),e("h3",{attrs:{id:"ä½¿ç”¨class-addivaræ·»åŠ ä¸€ä¸ªæˆå‘˜å˜é‡"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ä½¿ç”¨class-addivaræ·»åŠ ä¸€ä¸ªæˆå‘˜å˜é‡"}},[t._v("#")]),t._v(" ä½¿ç”¨class_addIvaræ·»åŠ ä¸€ä¸ªæˆå‘˜å˜é‡")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v('NSUInteger size;\nNSUInteger alignment;\nNSGetSizeAndAlignment("*", &size, &alignment);\nclass_addIvar(kclass, "expression", size, alignment, "*");\n\n\næ³¨:\n1.typeå®šä¹‰å‚è€ƒ:https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtTypeEncodings.html\n2."*"æ˜Ÿå·ä»£è¡¨å­—ç¬¦(),iOSå­—ç¬¦ä¸º4ä½ï¼Œå¹¶é‡‡ç”¨4ä½å¯¹é½kclass\n')])])]),e("h3",{attrs:{id:"ä½¿ç”¨class-addmethodæ·»åŠ æˆå‘˜æ–¹æ³•"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ä½¿ç”¨class-addmethodæ·»åŠ æˆå‘˜æ–¹æ³•"}},[t._v("#")]),t._v(" ä½¿ç”¨class_addMethodæ·»åŠ æˆå‘˜æ–¹æ³•")]),t._v(" "),e("p",[t._v('class_addMethod(kclass, @selector(setExpressionFormula:), (IMP)setExpressionFormula, "v@ğŸ˜¡");\nclass_addMethod(kclass, @selector(getExpressionFormula), (IMP)getExpressionFormula, "@@ğŸ˜Š;')]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v('static void setExpressionFormula(id self, SEL cmd, id value)\n{\n   NSLog(@"call setExpressionFormula");\n}\n\nstatic void getExpressionFormula(id self, SEL cmd)\n{\n    NSLog(@"call getExpressionFormula");\n} \n\næ³¨:\n1.typeå®šä¹‰å‚è€ƒ:https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtTypeEncodings.html\n2."v@:@",è§£é‡Šv-è¿”å›å€¼voidç±»å‹,@-selfæŒ‡é’ˆidç±»å‹,:-SELæŒ‡é’ˆSELç±»å‹,@-å‡½æ•°ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºidç±»å‹\n3."@@:",è§£é‡Š@-è¿”å›å€¼idç±»å‹,@-selfæŒ‡é’ˆidç±»å‹,:-SELæŒ‡é’ˆSELç±»å‹,\n')])])]),e("h3",{attrs:{id:"æ³¨å†Œåˆ°è¿è¡Œæ—¶ç¯å¢ƒ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#æ³¨å†Œåˆ°è¿è¡Œæ—¶ç¯å¢ƒ"}},[t._v("#")]),t._v(" æ³¨å†Œåˆ°è¿è¡Œæ—¶ç¯å¢ƒ")]),t._v(" "),e("p",[t._v("objc_registerClassPair(kclass);")]),t._v(" "),e("h3",{attrs:{id:"å®ä¾‹åŒ–ç±»"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å®ä¾‹åŒ–ç±»"}},[t._v("#")]),t._v(" å®ä¾‹åŒ–ç±»")]),t._v(" "),e("p",[t._v("id instance = [[kclass alloc] init];")]),t._v(" "),e("h3",{attrs:{id:"ç»™å˜é‡èµ‹å€¼"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ç»™å˜é‡èµ‹å€¼"}},[t._v("#")]),t._v(" ç»™å˜é‡èµ‹å€¼")]),t._v(" "),e("p",[t._v('object_setInstanceVariable(instance, "expression", "1+1");')]),t._v(" "),e("h3",{attrs:{id:"è·å–å˜é‡å€¼"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#è·å–å˜é‡å€¼"}},[t._v("#")]),t._v(" è·å–å˜é‡å€¼")]),t._v(" "),e("p",[t._v('void * value = NULL;\nobject_getInstanceVariable(instance, "expression", &value);')]),t._v(" "),e("h3",{attrs:{id:"è°ƒç”¨å‡½æ•°"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#è°ƒç”¨å‡½æ•°"}},[t._v("#")]),t._v(" è°ƒç”¨å‡½æ•°")]),t._v(" "),e("p",[t._v("[instance performSelector:@selector(getExpressionFormula)];")]),t._v(" "),e("h2",{attrs:{id:"runtimeé—®é¢˜"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#runtimeé—®é¢˜"}},[t._v("#")]),t._v(" Runtimeé—®é¢˜")]),t._v(" "),e("p",[t._v("é—®1ï¼š[obj foo]å’Œobjc_msgSend()å‡½æ•°ä¹‹é—´æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ"),e("br"),t._v("\nåœ¨ç¼–è¯‘å™¨ç¼–è¯‘åä¼šå˜æˆobjc_msgSend()ï¼Œç„¶åè¿›è¡Œæ¶ˆæ¯ä¼ é€’"),e("br"),t._v("\né—®2ï¼šèƒ½å¦å‘ç¼–è¯‘åçš„ç±»ä¸­å¢åŠ å®ä¾‹å˜é‡ï¼Ÿ"),e("br"),t._v("\nç¼–è¯‘å‰åˆ›å»ºçš„ç±»å·²ç»å®Œæˆäº†å®ä¾‹å˜é‡çš„å¸ƒå±€ï¼Œä»runtimeæ•°æ®ç»“æ„class_ro_tçš„åªè¯»ç‰¹æ€§å¯ä»¥çœ‹å‡ºç¼–è¯‘åçš„ç±»æ˜¯ä¸èƒ½å¢åŠ å®ä¾‹å˜é‡çš„ã€‚"),e("br"),t._v("\né—®3ï¼šèƒ½å¦å‘åŠ¨æ€æ·»åŠ çš„ç±»ä¸­å¢åŠ å®ä¾‹å˜é‡ï¼Ÿ"),e("br"),t._v("\nå¯ä»¥ï¼Œå› ä¸ºåŠ¨æ€æ·»åŠ ç±»çš„è¿‡ç¨‹ä¸­ï¼Œåªè¦åœ¨æ³¨å†Œç±»å¯¹(objc_registerClassPair)ä¹‹å‰æ·»åŠ æ˜¯å¯ä»¥çš„ã€‚")])])}),[],!1,null,null,null);s.default=r.exports}}]);