(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{581:function(a,t,r){"use strict";r.r(t);var s=r(65),_=Object(s.a)({},(function(){var a=this,t=a.$createElement,r=a._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[r("h1",{attrs:{id:"软件优化"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#软件优化"}},[a._v("#")]),a._v(" 软件优化")]),a._v(" "),r("h2",{attrs:{id:"一、哪些优化方案及如何使用"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#一、哪些优化方案及如何使用"}},[a._v("#")]),a._v(" 一、哪些优化方案及如何使用")]),a._v(" "),r("h2",{attrs:{id:"二、性能检测"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#二、性能检测"}},[a._v("#")]),a._v(" 二、性能检测")]),a._v(" "),r("h3",{attrs:{id:"_1-网络层"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-网络层"}},[a._v("#")]),a._v(" 1.网络层")]),a._v(" "),r("h4",{attrs:{id:"urlprotocol"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#urlprotocol"}},[a._v("#")]),a._v(" URLProtocol")]),a._v(" "),r("h4",{attrs:{id:"hook"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#hook"}},[a._v("#")]),a._v(" hook")]),a._v(" "),r("h3",{attrs:{id:"_2-采集"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-采集"}},[a._v("#")]),a._v(" 2.采集")]),a._v(" "),r("h4",{attrs:{id:"cpu"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#cpu"}},[a._v("#")]),a._v(" CPU")]),a._v(" "),r("h4",{attrs:{id:"内存消耗"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#内存消耗"}},[a._v("#")]),a._v(" 内存消耗")]),a._v(" "),r("h4",{attrs:{id:"调用堆栈"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#调用堆栈"}},[a._v("#")]),a._v(" 调用堆栈")]),a._v(" "),r("h4",{attrs:{id:"设备信息"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#设备信息"}},[a._v("#")]),a._v(" 设备信息")]),a._v(" "),r("h3",{attrs:{id:"_3-内存监控"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-内存监控"}},[a._v("#")]),a._v(" 3.内存监控")]),a._v(" "),r("h4",{attrs:{id:"内存使用"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#内存使用"}},[a._v("#")]),a._v(" 内存使用")]),a._v(" "),r("h4",{attrs:{id:"内存泄漏"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#内存泄漏"}},[a._v("#")]),a._v(" 内存泄漏")]),a._v(" "),r("h3",{attrs:{id:"_4-ui"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_4-ui"}},[a._v("#")]),a._v(" 4.UI")]),a._v(" "),r("h4",{attrs:{id:"fps"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#fps"}},[a._v("#")]),a._v(" FPS")]),a._v(" "),r("h4",{attrs:{id:"卡顿检测"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#卡顿检测"}},[a._v("#")]),a._v(" 卡顿检测")]),a._v(" "),r("h4",{attrs:{id:"子线程操作ui"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#子线程操作ui"}},[a._v("#")]),a._v(" 子线程操作UI")]),a._v(" "),r("h3",{attrs:{id:"_5-crash"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_5-crash"}},[a._v("#")]),a._v(" 5.Crash")]),a._v(" "),r("h4",{attrs:{id:"mach异常"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#mach异常"}},[a._v("#")]),a._v(" Mach异常")]),a._v(" "),r("h4",{attrs:{id:"unix异常"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#unix异常"}},[a._v("#")]),a._v(" UNIX异常")]),a._v(" "),r("h4",{attrs:{id:"objective-c异常"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#objective-c异常"}},[a._v("#")]),a._v(" Objective-C异常")]),a._v(" "),r("h4",{attrs:{id:"其他判定"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#其他判定"}},[a._v("#")]),a._v(" 其他判定")]),a._v(" "),r("h4",{attrs:{id:"crash解析"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#crash解析"}},[a._v("#")]),a._v(" crash解析")]),a._v(" "),r("h3",{attrs:{id:"_6-启动时间"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_6-启动时间"}},[a._v("#")]),a._v(" 6.启动时间")]),a._v(" "),r("h4",{attrs:{id:"main之前"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#main之前"}},[a._v("#")]),a._v(" main之前")]),a._v(" "),r("h4",{attrs:{id:"main之后"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#main之后"}},[a._v("#")]),a._v(" main之后")]),a._v(" "),r("h2",{attrs:{id:"三、性能优化"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#三、性能优化"}},[a._v("#")]),a._v(" 三、性能优化")]),a._v(" "),r("h3",{attrs:{id:"_1-源代码"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-源代码"}},[a._v("#")]),a._v(" 1.源代码")]),a._v(" "),r("h4",{attrs:{id:"代码重构"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#代码重构"}},[a._v("#")]),a._v(" 代码重构")]),a._v(" "),r("h3",{attrs:{id:"_2-xcode"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-xcode"}},[a._v("#")]),a._v(" 2.Xcode")]),a._v(" "),r("h4",{attrs:{id:"build-setting"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#build-setting"}},[a._v("#")]),a._v(" Build Setting")]),a._v(" "),r("h4",{attrs:{id:"静态检查"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#静态检查"}},[a._v("#")]),a._v(" 静态检查")]),a._v(" "),r("h4",{attrs:{id:"运行时检测"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#运行时检测"}},[a._v("#")]),a._v(" 运行时检测")]),a._v(" "),r("h3",{attrs:{id:"_3-gcd"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-gcd"}},[a._v("#")]),a._v(" 3.GCD")]),a._v(" "),r("h3",{attrs:{id:"_4-i-o"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_4-i-o"}},[a._v("#")]),a._v(" 4.I/O")]),a._v(" "),r("h3",{attrs:{id:"_5-内存"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_5-内存"}},[a._v("#")]),a._v(" 5.内存")]),a._v(" "),r("h3",{attrs:{id:"_6-网络层"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_6-网络层"}},[a._v("#")]),a._v(" 6.网络层")]),a._v(" "),r("h3",{attrs:{id:"_7-耗电"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_7-耗电"}},[a._v("#")]),a._v(" 7.耗电")]),a._v(" "),r("h3",{attrs:{id:"_8-ui优化"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_8-ui优化"}},[a._v("#")]),a._v(" 8.UI优化")]),a._v(" "),r("h3",{attrs:{id:"_9-启动速度"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_9-启动速度"}},[a._v("#")]),a._v(" 9.启动速度")]),a._v(" "),r("h3",{attrs:{id:"_10-web"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_10-web"}},[a._v("#")]),a._v(" 10.Web")]),a._v(" "),r("h3",{attrs:{id:"_11-包体积"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_11-包体积"}},[a._v("#")]),a._v(" 11.包体积")]),a._v(" "),r("h3",{attrs:{id:"_12-图层优化"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_12-图层优化"}},[a._v("#")]),a._v(" 12.图层优化")]),a._v(" "),r("p",[a._v("Xcode -> View Debugging -> Rendering -> Color Blended Layers可以看到渲染时view的混合状态，尽量给UIView设置背景色不透明。UIImageView不仅需要设置背景色不透明，还需要设置图片的alpha通过为否。")]),a._v(" "),r("p",[a._v("Color Hits Green and Misses Red"),r("br"),a._v("\n表示如果进行了光栅化，则layer直接从位图缓冲当中获取，而不是重新渲染，对于一些比较耗时的layer，如阴影等效果，我们可以启用光栅化，以减小渲染消耗的时间，因为光栅化会进行缓存的写入和读取，也会有一定的资源消耗，所以并不是所有的layer都需要光栅化。")]),a._v(" "),r("p",[a._v("Color Copied Images"),r("br"),a._v("\n表示png或者jpg图片加压后，如果GPU不支持该种图片格式，CPU就进行转码操作，会对性能有一定的消耗。")]),a._v(" "),r("p",[a._v("Color Misaligned Images"),r("br"),a._v("\n表示如果图片需要缩放则标记为黄色，如果没有像素对齐则标记为紫色")]),a._v(" "),r("p",[a._v("Color Offscreen-Rendered Yellow"),r("br"),a._v("\n检测触发离屏渲染，为黄色就说明有离屏渲染。触发离屏渲染的情况有：")]),a._v(" "),r("ol",[r("li",[a._v("重写drawRect方法")]),a._v(" "),r("li",[a._v("mask、shadow等")]),a._v(" "),r("li",[a._v("layer.shouldRasterize = true")]),a._v(" "),r("li",[a._v("设置圆角并不会导致离屏渲染，结合maskToBounds会导致离屏渲染，尽量避免滑动时设置圆角，如果必须设置圆角，可以启用光栅化，将圆角缓存起来")])]),a._v(" "),r("p",[a._v("Flash updated Regions"),r("br"),a._v("\n变化区域，对于布局没有改变的区别，不应该进行刷新，刷的地方会显示黄色")]),a._v(" "),r("p",[a._v("总结：")]),a._v(" "),r("ol",[r("li",[a._v("避免图层混合")]),a._v(" "),r("li",[a._v("避免临时转换，确保图片和frame大小一致")]),a._v(" "),r("li",[a._v("慎用离屏渲染")])])])}),[],!1,null,null,null);t.default=_.exports}}]);